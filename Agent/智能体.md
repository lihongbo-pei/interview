# æ™ºèƒ½ä½“

## ä¸€ã€ä»€ä¹ˆæ˜¯æ™ºèƒ½ä½“ï¼Ÿ

æ™ºèƒ½ä½“ï¼ˆAgentï¼‰æ˜¯ä¸€ä¸ªèƒ½å¤Ÿæ„ŸçŸ¥ç¯å¢ƒã€è¿›è¡Œæ¨ç†ã€åˆ¶å®šè®¡åˆ’ã€åšå‡ºå†³ç­–å¹¶è‡ªä¸»é‡‡å–è¡ŒåŠ¨ä»¥å®ç°ç‰¹å®šç›®æ ‡çš„ AI ç³»ç»Ÿã€‚å®ƒä»¥å¤§è¯­è¨€æ¨¡å‹ä¸ºæ ¸å¿ƒï¼Œé›†æˆ **è®°å¿†ã€çŸ¥è¯†åº“å’Œå·¥å…·** ç­‰èƒ½åŠ›ä¸ºä¸€ä½“ï¼Œæ„é€ äº†å®Œæ•´çš„å†³ç­–èƒ½åŠ›ã€æ‰§è¡Œèƒ½åŠ›å’Œè®°å¿†èƒ½åŠ›ï¼Œå°±åƒä¸€ä¸ªæœ‰ä¸»è§‚èƒ½åŠ¨æ€§çš„äººç±»ä¸€æ ·ã€‚

ä¸æ™®é€šçš„ AI å¤§æ¨¡å‹ä¸åŒï¼Œæ™ºèƒ½ä½“èƒ½å¤Ÿï¼š

1. æ„ŸçŸ¥ç¯å¢ƒï¼šé€šè¿‡å„ç§è¾“å…¥æ¸ é“è·å–ä¿¡æ¯ï¼ˆå¤šæ¨¡æ€ï¼‰ï¼Œç†è§£ç”¨æˆ·éœ€æ±‚å’Œç¯å¢ƒçŠ¶æ€
2. è‡ªä¸»è§„åˆ’ä»»åŠ¡æ­¥éª¤ï¼šå°†å¤æ‚ä»»åŠ¡åˆ†è§£ä¸ºå¯æ‰§è¡Œçš„å­ä»»åŠ¡ï¼Œå¹¶è®¾è®¡æ‰§è¡Œé¡ºåº
3. ä¸»åŠ¨è°ƒç”¨å·¥å…·å®Œæˆä»»åŠ¡ï¼šæ ¹æ®éœ€è¦é€‰æ‹©å¹¶ä½¿ç”¨å„ç§å¤–éƒ¨å·¥å…·å’Œ APIï¼Œæ‰©å±•è‡ªèº«èƒ½åŠ›è¾¹ç•Œ
4. è¿›è¡Œå¤šæ­¥æ¨ç†ï¼šé€šè¿‡æ€ç»´é“¾ï¼ˆChain of Thoughtï¼‰é€æ­¥åˆ†æé—®é¢˜å¹¶æ¨å¯¼è§£å†³æ–¹æ¡ˆ
5. æŒç»­å­¦ä¹ å’Œè®°å¿†è¿‡å»çš„äº¤äº’ï¼šä¿æŒä¸Šä¸‹æ–‡è¿è´¯æ€§ï¼Œåˆ©ç”¨å†å²äº¤äº’æ”¹è¿›å†³ç­–
6. æ ¹æ®ç¯å¢ƒåé¦ˆè°ƒæ•´è¡Œä¸ºï¼šæ ¹æ®æ‰§è¡Œç»“æœåŠ¨æ€è°ƒæ•´ç­–ç•¥ï¼Œå®ç°é—­ç¯ä¼˜åŒ–

å¤§å¤šæ•°åŒå­¦â ç¬¬ä¸€æ¬¡æ„Ÿå—åˆ°æ™ºèƒ½ä½“â€Œåº”è¯¥æ˜¯ â€œæ·±åº¦æ€è€ƒâ€ åŠŸèƒ½ï¼Œè¿™æ˜¯ Aâ€I é€æ­¥æ™ºèƒ½åŒ–çš„ä½“â€Œç°ï¼š

AI ä¼šåƒäººç±»ä¸€æ ·å…ˆæ€è€ƒåå›ç­”ï¼Œè®©ç­”æ¡ˆæ›´å‡†ç¡®ï¼š

### æ™ºèƒ½ä½“çš„åˆ†ç±»

è·Ÿäººçš„ç”Ÿé•¿â é˜¶æ®µä¸€æ ·ï¼Œæ™ºèƒ½ä½“ä¹Ÿâ€Œæ˜¯å¯ä»¥ä¸æ–­è¿›åŒ–çš„ã€‚æŒ‰ç…§è‡ªä¸»æ€§å’Œè§„åˆ’èƒ½â€åŠ›ï¼Œæ™ºèƒ½ä½“å¯ä»¥åˆ†ä¸ºâ€Œå‡ ä¸ªå±‚æ¬¡ï¼š

1ï¼‰ååº”å¼æ™ºèƒ½â ä½“ï¼šä»…æ ¹æ®å½“å‰è¾“å…¥å’Œå›ºå®šè§„åˆ™â€Œåšå‡ºååº”ï¼Œç±»ä¼¼ç®€å•çš„èŠå¤©æœºå™¨äººï¼Œæ²¡æœ‰çœŸæ­£çš„è§„åˆ’èƒ½åŠ›ã€‚23â€ å¹´æ—¶çš„å¤§å¤šæ•° AI èŠå¤©æœºâ€Œå™¨äººåº”ç”¨ï¼Œå‡ ä¹éƒ½æ˜¯ååº”å¼æ™ºèƒ½ä½“ã€‚

2ï¼‰æœ‰é™è§„åˆ’æ™ºèƒ½ä½“ï¼šèƒ½è¿›â è¡Œç®€å•åœ°å¤šæ­¥éª¤æ‰§è¡Œï¼Œä½†æ‰§è¡Œè·¯å¾„é€šå¸¸æ˜¯é¢„è®¾çš„æˆ–æœ‰â€Œä¸¥æ ¼é™åˆ¶çš„ã€‚é‰´å®šä¸º â€œèƒ½å¹²äº‹ã€ä½†å¹²ä¸äº†å¤æ‚çš„å¤§äº‹â€ã€‚24 å¹´æµè¡Œçš„å¾ˆå¤šå¯è”ç½‘æœç´¢å†…å®¹ã€è°ƒç”¨çŸ¥â€è¯†åº“å’Œå·¥å…·çš„ AI åº”ç”¨ï¼Œéƒ½å±äºè¿™ç±»æ™ºèƒ½ä½“ã€‚æ¯”â€Œå¦‚ ChatGPT + Pluginsï¼š

3ï¼‰è‡ªä¸»è§„â åˆ’æ™ºèƒ½ä½“ï¼šä¹Ÿå«ç›®æ ‡å¯¼â€Œå‘æ™ºèƒ½ä½“ï¼Œèƒ½å¤Ÿæ ¹æ®ä»»åŠ¡ç›®æ ‡è‡ªä¸»åˆ†è§£ä»»åŠ¡ã€â€åˆ¶å®šè®¡åˆ’ã€é€‰æ‹©å·¥å…·å¹¶â€Œä¸€æ­¥æ­¥æ‰§è¡Œï¼Œç›´åˆ°å®Œæˆä»»åŠ¡ã€‚

æ¯”å¦‚ 25 å¹´åˆå¾ˆç«çš„ Mâ anus é¡¹ç›®ï¼Œå®ƒçš„æ ¸å¿ƒäº®ç‚¹åœ¨äºå…¶ â€œè‡ªä¸»æ‰§è¡Œâ€ èƒ½â€ŒåŠ›ã€‚æ®å®˜æ–¹ä»‹ç»ï¼ŒManus èƒ½å¤Ÿåœ¨è™šæ‹Ÿæœºä¸­è°ƒç”¨å„ç§å·¥å…·ï¼ˆå¦‚ç¼–å†™ä»£ç ã€çˆ¬å–æ•°æ®ï¼‰å®Œæˆä»»åŠ¡ã€‚å…¶åº”ç”¨åœºæ™¯â€è¦†ç›–æ—…è¡Œè§„åˆ’ã€è‚¡ç¥¨åˆ†æã€æ•™è‚²å†…å®¹ç”Ÿæˆç­‰ 40 ä½™ä¸ªâ€Œé¢†åŸŸï¼Œæ‰€ä»¥åœ¨å½“æ—¶ç»™äº†å¾ˆå¤šäººéœ‡æ’¼æ„Ÿã€‚

ä½†å…¶å®æ—©åœ¨è¿™ä¹‹å‰ï¼Œå°±æœ‰ç±»ä¼¼çš„é¡¹ç›®äº†ï¼Œæ¯”å¦‚ AutoGPTï¼Œæ‰€ä»¥ Manus å¤§ç«çš„åŒæ—¶ä¹Ÿè¢«äººè¯Ÿç—… â€œä¼šè¥é”€è€Œå·²â€ã€‚ç”šè‡³æ²¡éš”å¤šä¹…å°±æœ‰å°å›¢é˜Ÿå¼€æºäº† Manus çš„å¤åˆ»ç‰ˆ â€”â€” [OpenManus](https://github.com/FoundationAgents/OpenManus)ï¼Œè¿™ç±»æ™ºèƒ½ä½“é€šè¿‡ â€œæ€è€ƒ - è¡ŒåŠ¨ - è§‚å¯Ÿâ€ çš„å¾ªç¯æ¨¡å¼å·¥ä½œï¼Œèƒ½å¤ŸæŒç»­æ¨è¿›ä»»åŠ¡ç›´è‡³å®Œæˆç›®æ ‡ã€‚

éœ€è¦æ³¨æ„ï¼Œè‡ªä¸»â è§„åˆ’èƒ½åŠ›æ˜¯æ™ºèƒ½ä½“å‘å±•çš„é‡è¦â€Œæ–¹å‘ï¼Œä½†å¹¶éæ‰€æœ‰åº”ç”¨åœºæ™¯éƒ½éœ€è¦å®Œå…¨çš„è‡ªä¸»è§„åˆ’èƒ½åŠ›ã€‚åœ¨â€æŸäº›åœºæ™¯ä¸­ï¼Œé™åˆ¶æ™ºèƒ½ä½“çš„è‡ªâ€Œä¸»æ€§åè€Œèƒ½æé«˜æ•ˆç‡å’Œå®‰å…¨æ€§ã€‚

## äºŒã€æ™ºèƒ½ä½“å®ç°å…³é”®æŠ€æœ¯

åœ¨è‡ªä¸»å¼€å‘â æ™ºèƒ½ä½“å‰ï¼Œæˆ‘ä»¬è¦å…ˆâ€Œäº†è§£ä¸€ä¸‹æ™ºèƒ½ä½“çš„å…³é”®å®ç°æŠ€æœ¯ï¼Œä¹Ÿå°±æ˜¯â€æ–¹æ¡ˆè®¾è®¡é˜¶æ®µåšçš„äº‹â€Œæƒ…ã€‚

### CoT æ€ç»´é“¾

CoTï¼ˆChain ofâ  Thoughtï¼‰æ€ç»´é“¾æ˜¯ä¸€ç§è®© AI åƒäººç±»ä¸€â€Œæ · â€œæ€è€ƒâ€ çš„æŠ€æœ¯ï¼Œå¸®åŠ© AI åœ¨å¤„ç†å¤æ‚é—®é¢˜æ—¶èƒ½å¤ŸæŒ‰æ­¥éª¤æ€è€ƒã€‚å¯¹äºå¤æ‚çš„æ¨ç†ç±»é—®é¢˜ï¼Œå…ˆæ€è€ƒåâ€æ‰§è¡Œï¼Œæ•ˆæœå¾€å¾€æ›´å¥½ã€‚è€Œä¸”è¿˜å¯ä»¥è®©æ¨¡å‹åœ¨ç”Ÿæˆç­”æ¡ˆæ—¶â€Œå±•ç¤ºæ¨ç†è¿‡ç¨‹ï¼Œä¾¿äºæˆ‘ä»¬ç†è§£å’Œä¼˜åŒ– AIã€‚

CoT çš„å®ç°æ–¹å¼å…¶å®å¾ˆç®€å•â ï¼Œå¯ä»¥åœ¨è¾“å…¥ Prompt æ—¶ï¼Œç»™æ¨¡å‹æä¾›é¢å¤–çš„æç¤ºæˆ–â€Œå¼•å¯¼ï¼Œæ¯”å¦‚ â€œè®©æˆ‘ä»¬ä¸€æ­¥ä¸€æ­¥æ€è€ƒè¿™ä¸ªé—®é¢˜â€ï¼Œè®©æ¨¡å‹ä»¥é€æ­¥æ¨ç†çš„æ–¹å¼ç”Ÿæˆå›ç­”ã€‚è¿˜å¯ä»¥è¿ç”¨ Prompt çš„ä¼˜åŒ–â€æŠ€å·§ few shotï¼Œç»™æ¨¡å‹æä¾›åŒ…å«æ€ç»´é“¾çš„ç¤ºä¾‹é—®é¢˜â€Œå’Œç­”æ¡ˆï¼Œè®©æ¨¡å‹å­¦ä¹ å¦‚ä½•æ„å»ºè‡ªå·±çš„æ€ç»´é“¾ã€‚

åœ¨ Opeâ nManus æ—©æœŸâ€Œç‰ˆæœ¬ä¸­ï¼Œå¯ä»¥çœ‹åˆ°å®ç° CoT çš„ç³»ç»Ÿâ€æç¤ºè¯ï¼š

```
You are an assistant focused on Chain of Thought reasoning. For each question, please follow these steps:  
  
1. Break down the problem: Divide complex problems into smaller, more manageable parts  
2. Think step by step: Think through each part in detail, showing your reasoning process  
3. Synthesize conclusions: Integrate the thinking from each part into a complete solution  
4. Provide an answer: Give a final concise answer  
  
Your response should follow this format:  
Thinking: [Detailed thought process, including problem decomposition, reasoning for each step, and analysis]  
Answer: [Final answer based on the thought process, clear and concise]  
  
Remember, the thinking process is more important than the final answer, as it demonstrates how you reached your conclusion.
```

æˆ‘ä»¬æ¥æµ‹è¯•ä¸€ä¸‹ï¼š

### Agent Loop æ‰§è¡Œå¾ªç¯

Agentâ  Loop æ˜¯æ™ºèƒ½ä½“â€Œæœ€æ ¸å¿ƒçš„å·¥ä½œæœºåˆ¶ï¼ŒæŒ‡æ™ºèƒ½ä½“åœ¨æ²¡æœ‰ç”¨æˆ·è¾“å…¥â€çš„æƒ…å†µä¸‹ï¼Œè‡ªä¸»é‡å¤æ‰§â€Œè¡Œæ¨ç†å’Œå·¥å…·è°ƒç”¨çš„è¿‡ç¨‹ã€‚

åœ¨ä¼ ç»Ÿçš„èŠå¤©æ¨¡å‹ä¸­ï¼Œâ æ¯æ¬¡ç”¨æˆ·æé—®åï¼ŒAI å›å¤ä¸€æ¬¡å°±ç»“æŸâ€Œäº†ã€‚ä½†åœ¨æ™ºèƒ½ä½“ä¸­ï¼ŒAI å›å¤åå¯èƒ½ä¼šç»§ç»­è‡ªä¸»æ‰§è¡Œåç»­åŠ¨ä½œï¼ˆå¦‚è°ƒç”¨å·¥å…·ã€å¤„ç†ç»“æœã€ç»§ç»­â€æ¨ç†ï¼‰ï¼Œå½¢æˆä¸€ä¸ªè‡ªä¸»æ‰§è¡Œçš„å¾ªç¯ï¼Œç›´åˆ°ä»»åŠ¡â€Œå®Œæˆï¼ˆæˆ–è€…è¶…å‡ºé¢„è®¾çš„æœ€å¤§æ­¥éª¤æ•°ï¼‰ã€‚

Agent Loop çš„å®ç°å¾ˆç®€å•ï¼Œå‚è€ƒä»£ç å¦‚ä¸‹ï¼š

```java
public String execute() {  
    List<String> results = new ArrayList<>();  
    while (currentStep < MAX_STEPS && !isFinished) {  
        currentStep++;  
        
        String stepResult = executeStep();  
        results.add("æ­¥éª¤ " + currentStep + ": " + stepResult);  
    }  
    if (currentStep >= MAX_STEPS) {  
        results.add("è¾¾åˆ°æœ€å¤§æ­¥éª¤æ•°: " + MAX_STEPS);  
    }  
    return String.join("\n", results);  
}
```

### ReAct æ¨¡å¼

ReActï¼ˆ**Reasâ oning + Acting**ï¼‰æ˜¯ä¸€ç§ç»“åˆâ€Œæ¨ç†å’Œè¡ŒåŠ¨çš„æ™ºèƒ½ä½“æ¶æ„ï¼Œå®ƒæ¨¡ä»¿äººç±»è§£å†³é—®é¢˜æ—¶ â€ æ€è€ƒ - è¡ŒåŠ¨ - è§‚å¯Ÿâ€ çš„å¾ªâ€ç¯ï¼Œç›®çš„æ˜¯é€šè¿‡äº¤äº’å¼å†³ç­–è§£å†³å¤æ‚ä»»åŠ¡ï¼Œæ˜¯â€Œç›®å‰æœ€å¸¸ç”¨çš„æ™ºèƒ½ä½“å·¥ä½œæ¨¡å¼ä¹‹ä¸€ã€‚

æ ¸å¿ƒæ€æƒ³ï¼š

1. æ¨ç†ï¼ˆReasonï¼‰ï¼šå°†åŸå§‹é—®é¢˜æ‹†åˆ†ä¸ºå¤šæ­¥éª¤ä»»åŠ¡ï¼Œæ˜ç¡®å½“å‰è¦æ‰§è¡Œçš„æ­¥éª¤ï¼Œæ¯”å¦‚ â€œç¬¬ä¸€æ­¥éœ€è¦æ‰“å¼€ç¼–ç¨‹å¯¼èˆªç½‘ç«™â€ã€‚
2. è¡ŒåŠ¨ï¼ˆActï¼‰ï¼šè°ƒç”¨å¤–éƒ¨å·¥å…·æ‰§è¡ŒåŠ¨ä½œï¼Œæ¯”å¦‚è°ƒç”¨æœç´¢å¼•æ“ã€æ‰“å¼€æµè§ˆå™¨è®¿é—®ç½‘é¡µç­‰ã€‚
3. è§‚å¯Ÿï¼ˆObserveï¼‰ï¼šè·å–å·¥å…·è¿”å›çš„ç»“æœï¼Œåé¦ˆç»™æ™ºèƒ½ä½“è¿›è¡Œä¸‹ä¸€æ­¥å†³ç­–ã€‚æ¯”å¦‚å°†æ‰“å¼€çš„ç½‘é¡µä»£ç è¾“å…¥ç»™ AIã€‚
4. å¾ªç¯è¿­ä»£ï¼šä¸æ–­é‡å¤ä¸Šè¿° 3 ä¸ªè¿‡ç¨‹ï¼Œç›´åˆ°ä»»åŠ¡å®Œæˆæˆ–è¾¾åˆ°ç»ˆæ­¢æ¡ä»¶ã€‚

ReAct æµç¨‹å¦‚å›¾ï¼š

![agent-1](assets/agent-1.jpg)

ç¤ºä¾‹å®ç°ä»£ç ï¼š

```java
void executeReAct(String task) {  
    String state = "å¼€å§‹";  
  
    while (!state.equals("å®Œæˆ")) {  
        
        String thought = "æ€è€ƒä¸‹ä¸€æ­¥è¡ŒåŠ¨";  
        System.out.println("æ¨ç†: " + thought);  
  
        
        String action = "æ‰§è¡Œå…·ä½“æ“ä½œ";  
        System.out.println("è¡ŒåŠ¨: " + action);  
  
        
        String observation = "è§‚å¯Ÿæ‰§è¡Œç»“æœ";  
        System.out.println("è§‚å¯Ÿ: " + observation);  
  
        
        state = "å®Œæˆ";  
    }  
}
```

### æ‰€éœ€æ”¯æŒç³»ç»Ÿ

é™¤äº†åŸºæœ¬çš„å·¥ä½œæœºåˆ¶å¤–ï¼Œæ™ºèƒ½ä½“çš„å®ç°è¿˜ä¾èµ–äºå¾ˆå¤šæ”¯æŒç³»ç»Ÿã€‚

1ï¼‰é¦–å…ˆæ˜¯ â AI å¤§æ¨¡å‹ï¼Œè¿™ä¸ªå°±ä¸â€Œå¤šè¯´äº†ï¼Œå¤§æ¨¡å‹æä¾›äº†æ€è€ƒã€æ¨ç†å’Œå†³ç­–çš„æ ¸å¿ƒèƒ½â€åŠ›ï¼Œè¶Šå¼ºçš„ AI å¤§æ¨¡â€Œå‹é€šå¸¸æ‰§è¡Œä»»åŠ¡çš„æ•ˆæœè¶Šå¥½ã€‚

2ï¼‰è®°å¿†ç³»ç»Ÿ

æ™ºèƒ½ä½“éœ€è¦è®°å¿†ç³»ç»Ÿâ æ¥å­˜å‚¨å¯¹è¯å†å²ã€ä¸­é—´ç»“æœå’Œæ‰§è¡ŒçŠ¶æ€ï¼Œâ€Œè¿™æ ·å®ƒæ‰èƒ½å¤Ÿè¿›è¡Œè¿ç»­å¯¹è¯å¹¶æ ¹æ®å†å²å¯¹è¯åˆ†ææ¥ä¸‹æ¥çš„å·¥ä½œæ­¥éª¤ã€‚ä¹‹å‰æˆ‘ä»¬å­¦ä¹ â€è¿‡å¦‚ä½•ä½¿ç”¨ Spring AI çš„ â€ŒChatMemory å®ç°å¯¹è¯è®°å¿†ã€‚

3ï¼‰çŸ¥è¯†åº“

å°½ç®¡å¤§è¯­è¨€æ¨¡å‹æ‹¥æœ‰â ä¸°å¯Œçš„å‚æ•°çŸ¥è¯†ï¼Œä½†é’ˆå¯¹ç‰¹å®šé¢†åŸŸçš„ä¸“â€Œä¸šçŸ¥è¯†å¾€å¾€éœ€è¦é¢å¤–çš„çŸ¥è¯†åº“æ”¯æŒã€‚ä¹‹å‰æˆ‘ä»¬å­¦ä¹ è¿‡ï¼Œé€šè¿‡ RAG æ£€ç´¢å¢â€å¼ºç”Ÿæˆ + å‘é‡æ•°æ®åº“ç­‰æŠ€æœ¯ï¼Œæ™ºèƒ½â€Œä½“å¯ä»¥æ£€ç´¢å¹¶åˆ©ç”¨ä¸“ä¸šçŸ¥è¯†å›ç­”é—®é¢˜ã€‚

4ï¼‰å·¥å…·è°ƒç”¨

å·¥å…·æ˜¯æ‰©å±•æ™ºèƒ½ä½“â èƒ½åŠ›è¾¹ç•Œçš„å…³é”®ï¼Œæ™ºèƒ½ä½“é€šè¿‡å·¥å…·è°ƒâ€Œç”¨å¯ä»¥è®¿é—®æœç´¢å¼•æ“ã€æ•°æ®åº“ã€API æ¥å£ç­‰å¤–éƒ¨æœåŠ¡ï¼Œæå¤§åœ°å¢å¼ºäº†â€å…¶è§£å†³å®é™…é—®é¢˜çš„èƒ½åŠ›ã€‚å½“ç„¶ï¼ŒMCâ€ŒP ä¹Ÿå¯ä»¥ç®—æ˜¯å·¥å…·è°ƒç”¨çš„ä¸€ç§ã€‚

ğŸ’¡ è¿™é‡Œåˆ†äº«ä¸€ç§ç‰¹â æ®Šçš„å·¥å…·è°ƒç”¨ â€”â€” Compute Uâ€Œseï¼Œå®ƒå…è®¸æ™ºèƒ½ä½“ç›´æ¥ä¸è®¡ç®—ç¯å¢ƒäº¤äº’ï¼Œæ¯”å¦‚æ‰§è¡Œä»£ç ã€æ“ä½œæ–‡ä»¶ç³»ç»Ÿç­‰ã€‚ç›®å‰ Câ€laude ç­‰å¹³å°å·²æä¾›æ­¤ç±»èƒ½åŠ›ï¼Œæ„Ÿå…´â€Œè¶£çš„åŒå­¦å¯ä»¥é˜…è¯»ä¸‹é¢çš„èµ„æ–™å­¦ä¹ ï¼š

- Claude æ”¯æŒ Compute Useï¼šhttps://docs.anthropic.com/en/docs/agents-and-tools/computer-use
- Compute Use å®ç°ç¤ºä¾‹ï¼šhttps://github.com/anthropics/anthropic-quickstarts/tree/main/computer-use-demo
- Compute Use å¼€æºå®ç°ï¼šhttps://github.com/e2b-dev/open-computer-useã€https://github.com/showlab/computer_use_ootb

ä½¿ç”¨ Comâ pute Use åŠŸèƒ½â€Œæ—¶éœ€è¦æ³¨æ„ï¼Œè¿™äº›æ“ä½œä¼šåœ¨æˆ‘ä»¬è‡ªå·±çš„ç³»ç»Ÿä¸Šæ‰§è¡Œâ€ï¼Œå»ºè®®åœ¨è™šæ‹Ÿç¯å¢ƒä¸­è¿è¡Œâ€Œï¼Œé˜²æ­¢æ„å¤–æ“ä½œå½±å“å®é™…ç³»ç»Ÿã€‚

ç»¼åˆä¸Šé¢ 4 ç±»â æŠ€æœ¯ï¼Œå¹¶ä¸”ç»“åˆ CoTã€Agenâ€Œt Loopã€ReAct ç­‰æœºåˆ¶ï¼ˆå¯ä»¥æ€»ç§°ä¸º â€œè§„åˆ’æ‰§è¡Œæœºåˆ¶â€ï¼‰â€ï¼Œæˆ‘ä»¬å°±å¯ä»¥æ„å»ºä¸€ä¸ªå®Œæ•´çš„ã€æœ‰è‡ªâ€Œä¸»è§„åˆ’èƒ½åŠ›çš„æ™ºèƒ½ä½“ç³»ç»Ÿå•¦ã€‚

## ä¸‰ã€ä½¿ç”¨ AI æ™ºèƒ½ä½“

æœ‰ 3 ç§â æ–¹å¼å¯ä»¥ä½¿ç”¨ AIâ€Œ æ™ºèƒ½ä½“ï¼Œä¹‹å‰çš„æ•™ç¨‹ä¸­å…¶å®æˆ‘ä»¬å·²ç»æœ‰â€æ¥è§¦è¿‡ï¼Œè¿™é‡Œå†å¿«é€Ÿâ€Œå¤ä¹ ä¸€éã€‚

### 1ã€å¹³å°ä¸­ä½¿ç”¨

è®¸å¤š AIâ  å¤§æ¨¡å‹å¼€å‘å¹³å°å·²â€Œç»æä¾›äº†æ™ºèƒ½ä½“åˆ›å»ºå’Œä½¿ç”¨åŠŸèƒ½ï¼Œæœ€ç®€å•â€çš„æ–¹å¼å°±æ˜¯ç›´æ¥åœ¨è¿™â€Œäº›å¹³å°ä¸Šåˆ›å»ºå’Œä½¿ç”¨æ™ºèƒ½ä½“ã€‚

æ¯”å¦‚å¯ä»¥åœ¨é˜¿é‡Œäº‘ç™¾ç‚¼ã€Dify ç­‰å¹³å°ä¸Šåˆ›å»ºæ™ºèƒ½ä½“ï¼š

### 2ã€è½¯ä»¶ä¸­ä½¿ç”¨

AI å¼€å‘å·¥å…· Câ ursor å°±é›†æˆäº† AI æ™ºèƒ½ä½“â€Œï¼Œå¯ä»¥å¸®æˆ‘ä»¬ç”Ÿæˆå®Œæ•´çš„é¡¹ç›®ä»£ç ã€æˆ–è€…è§£é‡Šé¡¹ç›®ä»£ç ã€‚é€‰æ‹© Agent â€æ¨¡å¼å°±å¯ä»¥ç›´æ¥ä½¿ç”¨äº†ï¼Œå»ºè®®åŒæ—¶å¼€å¯â€Œ Thinking æ·±åº¦æ€è€ƒï¼š

è¿è¡Œæ•ˆæœå¦‚â å›¾ï¼Œå…¸å‹çš„ CoTâ€Œ + Agent Loop + Reâ€Act æ¨¡å¼ï¼š

### 3ã€ç¨‹åºä¸­ä½¿ç”¨

ä¹‹å‰æœ‰è®²è§£è¿‡â ï¼Œå¦‚æœä½¿ç”¨ AI å¤§æ¨¡â€Œå‹å¼€å‘å¹³å°åˆ›å»ºäº†æ™ºèƒ½ä½“ï¼Œé‚£ä¹ˆå¯ä»¥ç›´æ¥é€šè¿‡ Sâ€DK æˆ– API åœ¨è‡ªâ€Œå·±çš„ç¨‹åºä¸­è°ƒç”¨æ™ºèƒ½ä½“ã€‚

å½“ç„¶ä¹Ÿå¯ä»¥å®Œå…¨é€šâ è¿‡ç¼–ç¨‹è‡ªä¸»å¼€å‘æ™ºèƒ½ä½“ï¼Œä¹‹å‰æˆ‘ä»¬â€Œé€šè¿‡ Spring AI åˆ›å»ºçš„æ—…æ¸¸è§„åˆ’å¤§å¸ˆ APP å°±å·²ç»æ˜¯ä¸ªâ€æ™ºèƒ½ä½“äº†ï¼ŒåŒ…å«äº†å¤§æ¨¡å‹å†³ç­–ã€è®°â€Œå¿†èƒ½åŠ›ã€çŸ¥è¯†åº“é›†æˆå’Œå·¥å…·è°ƒç”¨ã€‚

```
ChatResponse response = chatClient  
        .prompt()  
        .user(message)  
        
        .advisors(spec -> spec.param(CHAT_MEMORY_CONVERSATION_ID_KEY, chatId)  
                .param(CHAT_MEMORY_RETRIEVE_SIZE_KEY, 10))  
        
        .advisors(new MyLoggerAdvisor())  
        
        .advisors(new QuestionAnswerAdvisor(loveAppVectorStore))  
        
        .tools(toolCallbackProvider)  
        .call()  
        .chatResponse();
```

ä½†æ˜¯ï¼Œè¿™ä¸ªâ å®ç°è¿˜ä¸å…·å¤‡å®Œæ•´çš„â€Œè‡ªä¸»è§„åˆ’å’Œæ‰§è¡Œèƒ½åŠ›ï¼Œä¸‹é¢æˆ‘ä»¬å°†å­¦ä¹ æ›´â€é«˜çº§çš„è‡ªä¸»è§„åˆ’æ™ºâ€Œèƒ½ä½“æ¶æ„ã€‚

## å››ã€OpenManus å®ç°åŸç†

åœ¨æˆ‘ä»¬å¼€å‘è¶…çº§æ™ºèƒ½ä½“å‰ï¼Œå¯ä»¥å…ˆå­¦ä¹ ä¸‹ä¼˜ç§€çš„å¼€æºé¡¹ç›®ã€‚ä¸‹é¢ä»¥ [OpenManus é¡¹ç›®](https://github.com/FoundationAgents/OpenManus) ä¸ºä¾‹ï¼Œä» 0 å¼€å§‹é˜…è¯»é¡¹ç›®æºç ï¼Œå­¦åˆ°è¶…çº§æ™ºèƒ½ä½“å®ç°æ–¹å¼çš„åŒæ—¶ï¼Œå¸®åŠ©å¤§å®¶æŒæ¡å¿«é€Ÿå­¦ä¹ å¼€æºé¡¹ç›®çš„æ–¹æ³•ã€‚

ğŸ’¡ å‹æƒ…æâ ç¤ºï¼Œåˆ†æçš„æºâ€Œç æ˜¯ 2025 å¹´ 5 æœˆ 16 æ—¥çš„ï¼Œåç»­â€æºç å¯èƒ½ä¼šæŒç»­æ›´æ–°ï¼Œé‡â€Œç‚¹åœ¨äºå­¦ä¹ åˆ†ææºç çš„å¥—è·¯ã€‚

### å¿«é€Ÿè¿è¡Œ

å­¦ä¹ å¼€æºé¡¹ç›®çš„ç¬¬ä¸€æ­¥æ˜¯é˜…è¯»å®˜æ–¹æä¾›çš„ `README.md` é¡¹ç›®ä»‹ç»æ–‡æ¡£ï¼Œå…ˆæŠŠé¡¹ç›®è·‘èµ·æ¥ï¼Œå€Ÿæ­¤ç†Ÿæ‚‰ä¸šåŠ¡æµç¨‹ï¼Œè€Œä¸æ˜¯ä¸€ä¸Šæ¥å°±å•ƒæºç ã€‚

OpenMâ anus å®˜æ–¹æä¾›â€Œäº†ä¸€ä¸ª Demo è§†é¢‘ï¼Œæˆ‘ä»¬å°±ä¸å¿…å†â€è‡ªå·±æ­å»ºç¯å¢ƒæ¥è·‘é¡¹â€Œç›®äº†ï¼š

ä¸‹é¢è®©æˆ‘ä»¬çœ‹ä¸€â ä¸ª OpenManus çš„â€Œå¯¹è¯ç¤ºä¾‹ï¼Œå¸®åŠ©æˆ‘ä»¬äº†è§£å®ƒçš„å·¥ä½œæµç¨‹ã€‚å‡è®¾ç”¨æˆ·è¦å®Œæˆä¸€â€ä¸ªä»»åŠ¡ â€”â€” åœ¨ç¼–ç¨‹å¯¼èˆªç½‘â€Œç«™ä¸Šå¯»æ‰¾çƒ­é—¨æ–‡ç« ï¼Œå¯¹è¯å¦‚ä¸‹ï¼š

```
ç”¨æˆ·ï¼šå¸®æˆ‘åœ¨ç¼–ç¨‹å¯¼èˆªç½‘ç«™ä¸Šæ‰¾åˆ°æœ€è¿‘çš„å‡ ç¯‡çƒ­é—¨æ–‡ç«   
  
ç³»ç»Ÿï¼šOpenManus å·²å¯åŠ¨ï¼Œæ­£åœ¨å¤„ç†æ‚¨çš„è¯·æ±‚...  
  
åŠ©æ‰‹ï¼šæˆ‘ä¼šå¸®æ‚¨åœ¨ç¼–ç¨‹å¯¼èˆªç½‘ç«™æŸ¥æ‰¾æœ€è¿‘çš„çƒ­é—¨æ–‡ç« ã€‚è®©æˆ‘å…ˆç”¨æµè§ˆå™¨å·¥å…·è®¿é—®ç¼–ç¨‹å¯¼èˆªç½‘ç«™ã€‚  
  
ç³»ç»Ÿï¼šæ­£åœ¨è°ƒç”¨æµè§ˆå™¨å·¥å…·...  
  
åŠ©æ‰‹ï¼šæˆ‘æˆåŠŸæ‰“å¼€äº†æµè§ˆå™¨å¹¶è®¿é—®äº†ç¼–ç¨‹å¯¼èˆªç½‘ç«™ã€‚ä»ç½‘ç«™å†…å®¹æ¥çœ‹ï¼Œæˆ‘ç°åœ¨éœ€è¦å¯¼èˆªåˆ°çƒ­é—¨æ–‡ç« åŒºåŸŸï¼Œç„¶åæå–è¿™äº›æ–‡ç« çš„ä¿¡æ¯ã€‚  
  
ç³»ç»Ÿï¼šæ­£åœ¨æ‰§è¡Œæµè§ˆå™¨æ“ä½œ...  
  
åŠ©æ‰‹ï¼šæˆ‘å·²åœ¨ç¼–ç¨‹å¯¼èˆªç½‘ç«™æ‰¾åˆ°äº†çƒ­é—¨æ–‡ç« åŒºåŸŸï¼Œä»¥ä¸‹æ˜¯æœ€è¿‘çš„å‡ ç¯‡çƒ­é—¨æ–‡ç« ï¼š  
  
1. ã€ŠSpring Boot å®æˆ˜ï¼šæ„å»ºå¾®æœåŠ¡åº”ç”¨ã€‹- é˜…è¯»é‡ï¼š3200  
2. ã€Šå‰ç«¯æ¡†æ¶å¯¹æ¯”ï¼šReact vs Vue vs Angularã€‹- é˜…è¯»é‡ï¼š2850  
3. ã€ŠPython æ•°æ®åˆ†æå…¥é—¨ï¼šä» Pandas åˆ°å¯è§†åŒ–ã€‹- é˜…è¯»é‡ï¼š2400  
4. ã€ŠDocker å®¹å™¨åŒ–åº”ç”¨éƒ¨ç½²æœ€ä½³å®è·µã€‹- é˜…è¯»é‡ï¼š2150  
5. ã€Šç®—æ³•å­¦ä¹ è·¯çº¿ï¼šä»å…¥é—¨åˆ°ç²¾é€šã€‹- é˜…è¯»é‡ï¼š1980  
  
è¿™äº›æ–‡ç« æ˜¯æ ¹æ®ç½‘ç«™æ˜¾ç¤ºçš„é˜…è¯»é‡æ’åºçš„çƒ­é—¨æ–‡ç« ã€‚  
  
ç³»ç»Ÿï¼šæ­£åœ¨è°ƒç”¨ç»ˆæ­¢å·¥å…·...  
  
åŠ©æ‰‹ï¼šå·²å®Œæˆä»»åŠ¡ï¼ŒæˆåŠŸæ‰¾åˆ°ç¼–ç¨‹å¯¼èˆªç½‘ç«™ä¸Šçš„çƒ­é—¨æ–‡ç« ã€‚å¦‚æœæ‚¨å¯¹æŸç¯‡æ–‡ç« æ„Ÿå…´è¶£æˆ–æœ‰å…¶ä»–éœ€æ±‚ï¼Œè¯·éšæ—¶å‘Šè¯‰æˆ‘ã€‚
```

åœ¨è¿™ä¸ªç¤ºä¾‹ä¸­ï¼ŒOpenMaâ nus é¦–å…ˆç†è§£ç”¨æˆ·ä»»åŠ¡ï¼Œç„¶åé€‰æ‹©åˆé€‚çš„å·¥å…·ï¼ˆæµè§ˆâ€Œå™¨å·¥å…·ï¼‰æ¥æ‰§è¡Œä»»åŠ¡ï¼Œæœ€åæ•´ç†ä¿¡æ¯å¹¶è¿”å›ç»“æœã€‚æ•´ä¸ªè¿‡ç¨‹ä½“ç°äº† ReAct æ¨¡å¼çš„æ ¸å¿ƒè¦ç´ ï¼šæ€è€ƒï¼ˆThiâ€nkingï¼‰ã€è¡ŒåŠ¨ï¼ˆActionï¼‰å’Œè§‚å¯Ÿï¼ˆObseâ€Œrvationï¼‰çš„å¾ªç¯ï¼Œç›´åˆ°ä»»åŠ¡å®Œæˆã€‚

### OpenManus æ•´ä½“æ¶æ„

äº†è§£äº† OpenManus çš„æ ¸å¿ƒåŠŸèƒ½åï¼Œå…ˆ **ä»æ•´ä½“åˆ°å±€éƒ¨** åœ°è§‚å¯Ÿ OpenManus çš„æ¶æ„ï¼Œç®€å•æ¥è¯´å°±æ˜¯çœ‹æ–‡ä»¶å¤¹çš„ç»„ç»‡å½¢å¼ã€æ–‡ä»¶çš„å‘½åè§„åˆ™ã€ä»¥åŠæ–‡ä»¶ä¹‹é—´çš„å…³è”ï¼Œæš‚æ—¶ä¸ç”¨æ·±å…¥æºç ã€‚

#### 1ã€æ•´ä½“æ–‡ä»¶å¤¹ç»„ç»‡å½¢å¼

å…ˆçœ‹æ–‡ä»¶å¤¹çš„ç»„ç»‡å½¢å¼ï¼Œè§åçŸ¥æ„ï¼š

#### 2ã€agent ç›®å½•

agent â ç›®å½•æ˜¯ OpenManâ€Œus å®ç°çš„æ ¸å¿ƒï¼Œé‡‡ç”¨äº†åˆ†å±‚çš„ä»£ç†æ¶æ„ï¼Œä¸åŒâ€å±‚æ¬¡çš„ä»£ç†è´Ÿè´£ä¸åŒçš„åŠŸâ€Œèƒ½ï¼Œè¿™æ ·æ›´åˆ©äºç³»ç»Ÿçš„æ‰©å±•ã€‚

OpenManus çš„ä»£ç†æ¶æ„ä¸»è¦åŒ…å«ä»¥ä¸‹å‡ å±‚ï¼š

- BaseAgentï¼šæœ€åŸºç¡€çš„ä»£ç†æŠ½è±¡ç±»ï¼Œå®šä¹‰äº†æ‰€æœ‰ä»£ç†çš„åŸºæœ¬çŠ¶æ€ç®¡ç†å’Œæ‰§è¡Œå¾ªç¯
- ReActAgentï¼šå®ç° ReAct æ¨¡å¼çš„ä»£ç†ï¼Œå…·æœ‰æ€è€ƒï¼ˆThinkï¼‰å’Œè¡ŒåŠ¨ï¼ˆActï¼‰ä¸¤ä¸ªä¸»è¦æ­¥éª¤
- ToolCallAgentï¼šèƒ½å¤Ÿè°ƒç”¨å·¥å…·çš„ä»£ç†ï¼Œç»§æ‰¿è‡ª ReActAgent å¹¶æ‰©å±•äº†å·¥å…·è°ƒç”¨èƒ½åŠ›
- Manusï¼šå…·ä½“å®ç°çš„æ™ºèƒ½ä½“å®ä¾‹ï¼Œé›†æˆäº†æ‰€æœ‰èƒ½åŠ›å¹¶æ·»åŠ äº†æ›´å¤šä¸“ä¸šå·¥å…·

è¿˜æœ‰æ›´å¤šé€‚ç”¨äºç‰¹å®šé¢†åŸŸâ çš„æ™ºèƒ½ä½“å®ä¾‹ï¼Œæ¯”å¦‚ DataAnalysisâ€Œ æ•°æ®åˆ†æ Agentã€SWE è½¯ä»¶å¼€å‘å·¥ç¨‹å¸ˆ Agentã€MCP æœåŠ¡äº¤äº’ Agentâ€ã€Browser æµè§ˆå™¨æ“ä½œ Agentï¼Œå®ƒâ€Œä»¬éƒ½ç»§æ‰¿äº† ToolCallAgentã€‚

#### 3ã€tool ç›®å½•

tool â ç›®å½•å®šä¹‰äº†å„ç§å„æ ·â€Œçš„å·¥å…·ï¼Œæ¯”å¦‚ç½‘é¡µæœç´¢ã€æ–‡ä»¶æ“ä½œã€è¯¢æ±‚â€ç”¨æˆ·å¸®åŠ©ã€ä»£ç æ‰§è¡Œâ€Œå™¨ç­‰ç­‰ï¼š

#### 4ã€prompt ç›®å½•

prompâ t ç›®å½•å®šä¹‰äº†æ•´ä¸ªé¡¹â€Œç›®ä¸­å¯èƒ½ä¼šç”¨åˆ°çš„æç¤ºè¯ã€‚ä»ä¸‹å›¾ä¸­æˆ‘ä»¬å¯ä»¥â€çœ‹åˆ°æç¤ºè¯å†™çš„æ¯”è¾ƒä¸“â€Œä¸šï¼Œè¿™å—ä¹Ÿæ˜¯æ¯”è¾ƒå€¼å¾—å­¦ä¹ çš„ã€‚

#### 5ã€å…¶ä»–æ”¯æŒ

ä¸ºäº†å®ç°å®Œâ æ•´çš„æ™ºèƒ½ä½“åŠŸèƒ½ï¼ŒOâ€ŒpenManus ä¾èµ–ä»¥ä¸‹å…³é”®ç»„ä»¶ï¼š

- è®°å¿†ç³»ç»Ÿï¼šä½¿ç”¨ Memory ç±»å­˜å‚¨å¯¹è¯å†å²å’Œä¸­é—´çŠ¶æ€
- LLM å¤§æ¨¡å‹ï¼šé€šè¿‡ LLM ç±»æä¾›æ€è€ƒå’Œå†³ç­–èƒ½åŠ›
- å·¥å…·ç³»ç»Ÿï¼šæä¾› BaseTool å’Œ ToolCollection ç±»æ‰©å±•æ™ºèƒ½ä½“çš„èƒ½åŠ›è¾¹ç•Œ
- æµç¨‹æ§åˆ¶ï¼šé€šè¿‡ AgentState å’Œæ‰§è¡Œå¾ªç¯ç®¡ç†çŠ¶æ€è½¬æ¢å’Œä»»åŠ¡æµç¨‹

åœ¨ OpenManus ä¸­ï¼Œè¿™äº›éƒ½æ˜¯è‡ªä¸»å®ç°çš„ï¼š

### AI æ™ºèƒ½ä½“æ ¸å¿ƒå®ç°

äº†è§£æ•´ä½“æ¶æ„åï¼Œæˆ‘ä»¬é‡ç‚¹å­¦ä¹  Agent åˆ†å±‚ä»£ç†æ¶æ„ã€‚

#### 1ã€BaseAgent

BaseAgent æ˜¯æ‰€æœ‰ä»£ç†çš„åŸºç¡€ï¼Œå®šä¹‰äº†ä»£ç†çŠ¶æ€ç®¡ç†å’Œæ‰§è¡Œå¾ªç¯çš„æ ¸å¿ƒé€»è¾‘ã€‚æŸ¥çœ‹ `base.py` æ–‡ä»¶ï¼Œå…³é”®ä»£ç å°±æ˜¯ Agent Loop çš„å®ç°ï¼Œé€šè¿‡ while å®ç°å¾ªç¯ï¼Œå¹¶ä¸”å®šä¹‰äº†æ­»å¾ªç¯æ£€æŸ¥æœºåˆ¶ï¼š

å®ç°ï¼Œé€šè¿‡ while å®ç°å¾ªç¯ï¼Œå¹¶ä¸”å®šä¹‰äº†æ­»å¾ªç¯æ£€æŸ¥æœºåˆ¶ï¼š

```python
class BaseAgent(BaseModel, ABC):  
    async def run(self, request: Optional[str] = None) -> str:  
        """æ‰§è¡Œä»£ç†çš„ä¸»å¾ªç¯"""  
        if self.state != AgentState.IDLE:  
            raise RuntimeError(f"Cannot run agent from state: {self.state}")  
  
        if request:  
            self.update_memory("user", request)  
  
        results: List[str] = []  
        async with self.state_context(AgentState.RUNNING):  
            while (self.current_step < self.max_steps and   
                  self.state != AgentState.FINISHED):  
                self.current_step += 1  
                step_result = await self.step()  
                  
                
                if self.is_stuck():  
                    self.handle_stuck_state()  
                      
                results.append(f"Step {self.current_step}: {step_result}")  
  
            if self.current_step >= self.max_steps:  
                self.current_step = 0  
                self.state = AgentState.IDLE  
                results.append(f"Terminated: Reached max steps ({self.max_steps})")  
          
        return "\n".join(results) if results else "No steps executed"  
      
    @abstractmethod  
    async def step(self) -> str:  
        """æ‰§è¡Œå•æ­¥æ“ä½œï¼Œå¿…é¡»ç”±å­ç±»å®ç°"""
```

è¿™é‡Œå…¶å®ä½¿â ç”¨äº†**æ¨¡æ¿æ–¹æ³•**è®¾è®¡æ¨¡â€Œå¼ï¼Œçˆ¶ç±»å®šä¹‰æ‰§è¡Œæµç¨‹ï¼Œå…·ä½“çš„æ‰§è¡Œæ–¹æ³•â€ï¼ˆstepï¼‰äº¤ç»™â€Œå­ç±»å®ç°ã€‚

#### 2ã€ReActAgent

ReActAgent å®ç°äº† ReAct æ¨¡å¼ï¼Œå°†ä»£ç†çš„æ‰§è¡Œè¿‡ç¨‹åˆ†ä¸ºæ€è€ƒï¼ˆThinkï¼‰å’Œè¡ŒåŠ¨ï¼ˆActï¼‰ä¸¤ä¸ªå…³é”®æ­¥éª¤ã€‚æŸ¥çœ‹ `react.py` æ–‡ä»¶ï¼š

```python
class ReActAgent(BaseAgent, ABC):  
    @abstractmethod  
    async def think(self) -> bool:  
        """å¤„ç†å½“å‰çŠ¶æ€å¹¶å†³å®šä¸‹ä¸€æ­¥è¡ŒåŠ¨"""  
          
    @abstractmethod  
    async def act(self) -> str:  
        """æ‰§è¡Œå†³å®šçš„è¡ŒåŠ¨"""  
          
    async def step(self) -> str:  
        """æ‰§è¡Œå•æ­¥ï¼šæ€è€ƒå’Œè¡ŒåŠ¨"""  
        should_act = await self.think()  
        if not should_act:  
            return "Thinking complete - no action needed"  
        return await self.act()
```

ä¸Šè¿°ä»£ç åŒæ ·è¿ç”¨â äº†æ¨¡æ¿æ–¹æ³•è®¾è®¡æ¨¡å¼ï¼Œè¿™ç§è®¾è®¡ä½“ç°â€Œäº† ReAct æ¨¡å¼çš„æ ¸å¿ƒæ€æƒ³ï¼Œä¹Ÿå°±æ˜¯ â€œæ€è€ƒ - è¡ŒåŠ¨ - è§‚â€å¯Ÿâ€ çš„å¾ªç¯è¿‡ç¨‹ã€‚ä½†æ˜¯å…·ä½“æ€ä¹ˆæ€â€Œè€ƒã€æ€ä¹ˆè¡ŒåŠ¨ï¼Œäº¤ç»™å­ç±»å»å®ç°ã€‚

#### 3ã€ToolCallAgent

ToolCallAgent åœ¨ ReAct æ¨¡å¼çš„åŸºç¡€ä¸Šå¢åŠ äº†å·¥å…·è°ƒç”¨èƒ½åŠ›ï¼Œæ˜¯ OpenManus æœ€é‡è¦çš„ä¸€ä¸ªå±‚æ¬¡ã€‚æŸ¥çœ‹ `toolcall.py` æ–‡ä»¶ï¼Œè™½ç„¶ä»£ç æ¯”è¾ƒå¤æ‚ï¼Œä½†åŸç†å¾ˆç®€å•ï¼Œå°±æ˜¯å·¥å…·è°ƒç”¨æœºåˆ¶çš„å…·ä½“å®ç°ï¼š

1. thinkï¼šå’Œ AI äº¤äº’æ€è€ƒä½¿ç”¨ä»€ä¹ˆå·¥å…·
2. actï¼šç¨‹åºæ‰§è¡Œå·¥å…·
3. observeï¼šå°†ç»“æœè¿”å›ç»™ AI

```python
class ToolCallAgent(ReActAgent):  
    """èƒ½å¤Ÿæ‰§è¡Œå·¥å…·è°ƒç”¨çš„ä»£ç†ç±»"""  
      
    available_tools: ToolCollection = ToolCollection(  
        CreateChatCompletion(), Terminate()  
    )  
    tool_choices: TOOL_CHOICE_TYPE = ToolChoice.AUTO  
    special_tool_names: List[str] = Field(default_factory=lambda: [Terminate().name])  
      
    async def think(self) -> bool:  
        """å¤„ç†å½“å‰çŠ¶æ€å¹¶ä½¿ç”¨å·¥å…·å†³å®šä¸‹ä¸€æ­¥è¡ŒåŠ¨"""  
        
        if self.next_step_prompt:  
            user_msg = Message.user_message(self.next_step_prompt)  
            self.messages += [user_msg]  
              
        
        response = await self.llm.ask_tool(  
            messages=self.messages,  
            system_msgs=([Message.system_message(self.system_prompt)]   
                        if self.system_prompt else None),  
            tools=self.available_tools.to_params(),  
            tool_choice=self.tool_choices,  
        )  
          
        
        self.tool_calls = tool_calls = (  
            response.tool_calls if response and response.tool_calls else []  
        )  
        content = response.content if response and response.content else ""  
          
        
        assistant_msg = (  
            Message.from_tool_calls(content=content, tool_calls=self.tool_calls)  
            if self.tool_calls  
            else Message.assistant_message(content)  
        )  
        self.memory.add_message(assistant_msg)  
          
        
        return bool(self.tool_calls or content)  
      
    async def act(self) -> str:  
        """æ‰§è¡Œå·¥å…·è°ƒç”¨å¹¶å¤„ç†ç»“æœ"""  
        if not self.tool_calls:  
            
            return self.messages[-1].content or "No content or commands to execute"  
              
        results = []  
        for command in self.tool_calls:  
            
            result = await self.execute_tool(command)  
              
            
            tool_msg = Message.tool_message(  
                content=result,  
                tool_call_id=command.id,  
                name=command.function.name,  
                base64_image=self._current_base64_image,  
            )  
            self.memory.add_message(tool_msg)  
            results.append(result)  
              
        return "\n\n".join(results)
```

#### 4ã€Manus

Manus ç±»æ˜¯ OpenManus çš„æ ¸å¿ƒæ™ºèƒ½ä½“å®ä¾‹ï¼Œé›†æˆäº†å„ç§å·¥å…·å’Œèƒ½åŠ›ã€‚æŸ¥çœ‹ `manus.py` æ–‡ä»¶ï¼š

```python
class Manus(ToolCallAgent):  
    """å¤šåŠŸèƒ½é€šç”¨æ™ºèƒ½ä½“ï¼Œæ”¯æŒæœ¬åœ°å’Œ MCP å·¥å…·"""  
      
    name: str = "Manus"  
    description: str = "A versatile agent that can solve various tasks using multiple tools"  
      
    
    available_tools: ToolCollection = Field(  
        default_factory=lambda: ToolCollection(  
            PythonExecute(),  
            BrowserUseTool(),  
            StrReplaceEditor(),  
            AskHuman(),  
            Terminate(),  
        )  
    )  
```

#### MCP å®¢æˆ·ç«¯ç”¨äºè¿œç¨‹å·¥å…·è®¿é—®

mcp_clients: MCPClients = Field(default_factory=MCPClients)

```
    @classmethod  
    async def create(cls, **kwargs) -> "Manus":  
        """å·¥å‚æ–¹æ³•åˆ›å»ºå¹¶åˆå§‹åŒ– Manus å®ä¾‹"""  
        instance = cls(**kwargs)  
        await instance.initialize_mcp_servers()  
        instance._initialized = True  
        return instance  
          
    async def think(self) -> bool:  
        """å¤„ç†å½“å‰çŠ¶æ€å¹¶æ ¹æ®ä¸Šä¸‹æ–‡å†³å®šä¸‹ä¸€æ­¥è¡ŒåŠ¨"""  
        if not self._initialized:  
            await self.initialize_mcp_servers()  
            self._initialized = True  
              
        
        original_prompt = self.next_step_prompt  
        browser_in_use = self._check_browser_in_use()  
          
        if browser_in_use:  
            self.next_step_prompt = (  
                await self.browser_context_helper.format_next_step_prompt()  
            )  
              
        result = await super().think()  
          
        
        self.next_step_prompt = original_prompt  
          
        return result
```

### å…³é”®å®ç°ç»†èŠ‚

å­¦å®Œäº†è¶…çº§æ™ºèƒ½ä½“â çš„æ ¸å¿ƒå®ç°åï¼Œæˆ‘ä»¬å†å­¦ä¹ ä¸€äº›é¡¹â€Œç›®ä¸­æ¯”è¾ƒå¾®å¦™çš„å®ç°ç»†èŠ‚ï¼Œå¯¹æˆ‘ä»¬è‡ªå·±å¼€å‘é¡¹ç›®ä¹Ÿä¼šå¾ˆæœ‰å¸®åŠ©â€‚â€‚â€‚â€â€‚â€‚â€‚â€‚â€‚â€‚â€‚â€‚â€‚â€‚â€‚â€‚â€‚â€‰â€‚â€Œâ€‰â€‚â€‚â€‚â€‚â€‚â€‚â€‰â€‚â€‰â€‰â€‚â€‰â€‰

#### 1ã€å·¥å…·ç³»ç»Ÿè®¾è®¡

1ï¼‰å·¥å…·æŠ½è±¡å±‚ BaseTool

æ‰€æœ‰å·¥å…·å‡ç»§æ‰¿è‡ª `BaseTool` æŠ½è±¡åŸºç±»ï¼Œæä¾›ç»Ÿä¸€çš„æ¥å£å’Œè¡Œä¸ºï¼š

```
class BaseTool(ABC, BaseModel):  
    name: str  
    description: str  
    parameters: Optional[dict] = None  
      
    async def __call__(self, **kwargs) -> Any:  
        """ä½¿ç”¨ç»™å®šå‚æ•°æ‰§è¡Œå·¥å…·"""  
        return await self.execute(**kwargs)  
          
    @abstractmethod  
    async def execute(self, **kwargs) -> Any:  
        """æ‰§è¡Œå·¥å…·çš„å…·ä½“é€»è¾‘ï¼Œç”±å­ç±»å®ç°"""  
          
    def to_param(self) -> Dict:  
        """å°†å·¥å…·è½¬æ¢ä¸ºå‡½æ•°è°ƒç”¨æ ¼å¼"""  
        return {  
            "type": "function",  
            "function": {  
                "name": self.name,  
                "description": self.description,  
                "parameters": self.parameters,  
            },  
        }
```

è¿™ç§è®¾è®¡ä½¿â å¾—æ¯ä¸ªå·¥å…·éƒ½æœ‰ç»Ÿä¸€â€Œçš„è°ƒç”¨æ–¹å¼ï¼ŒåŒæ—¶å…·æœ‰è§„èŒƒåŒ–çš„å‚æ•°æè¿°â€ï¼Œä¾¿äº LLM ç†â€Œè§£å·¥å…·çš„ä½¿ç”¨æ–¹æ³•ã€‚

2ï¼‰ç»ˆæ­¢å·¥å…· Terminate

Termiâ nate å·¥å…·æ˜¯ä¸€ä¸ªâ€Œç‰¹æ®Šçš„å·¥å…·ï¼Œå…è®¸æ™ºèƒ½ä½“é€šè¿‡ AI å¤§æ¨¡å‹â€è‡ªä¸»å†³å®šä½•æ—¶ç»“æŸä»»åŠ¡â€Œï¼Œé¿å…æ— é™å¾ªç¯æˆ–è€…è¿‡æ—©ç»“æŸã€‚

```
class Terminate(BaseTool):  
    name: str = "terminate"  
    description: str = """Terminate the interaction when the request is met OR   
                          if the assistant cannot proceed further with the task.  
                          When you have finished all the tasks, call this tool to end the work."""  
      
    parameters: dict = {  
        "type": "object",  
        "properties": {  
            "status": {  
                "type": "string",  
                "description": "The finish status of the interaction.",  
                "enum": ["success", "failure"],  
            }  
        },  
        "required": ["status"],  
    }  
      
    async def execute(self, status: str) -> str:  
        """å®Œæˆå½“å‰æ‰§è¡Œ"""  
        return f"The interaction has been completed with status: {status}"
```

åœ¨ agent æºç ä¸­ï¼Œæœ‰ä¸€ä¸ª `special_tool_names` å˜é‡ï¼Œç”¨äºæŒ‡å®šç»ˆæ­¢å·¥å…·ç­‰ç‰¹æ®Šå·¥å…·ï¼š

3ï¼‰è¯¢é—®å·¥å…· AskHuman

AskHumaâ n å·¥å…·å…è®¸æ™ºèƒ½ä½“åœ¨é‡åˆ°æ— â€Œæ³•è‡ªä¸»è§£å†³çš„é—®é¢˜æ—¶å‘äººç±»å¯»æ±‚å¸®åŠ©ï¼Œä¹Ÿå°±æ˜¯ç»™ç”¨æˆ·ä¸€ä¸ªè¾“â€å…¥æ¡†ï¼Œè®©æˆ‘ä»¬èƒ½å¤Ÿæ›´å¥½åœ°å¹²é¢„â€Œæ™ºèƒ½ä½“å®Œæˆä»»åŠ¡çš„è¿‡ç¨‹ã€‚

```
class AskHuman(BaseTool):  
    """Add a tool to ask human for help."""  
  
    name: str = "ask_human"  
    description: str = "Use this tool to ask human for help."  
    parameters: str = {  
        "type": "object",  
        "properties": {  
            "inquire": {  
                "type": "string",  
                "description": "The question you want to ask human.",  
            }  
        },  
        "required": ["inquire"],  
    }  
  
    async def execute(self, inquire: str) -> str:  
        return input(f"""Bot: {inquire}\n\nYou: """).strip()
```

è¿™ä¸ªå·¥å…·å®â ç°è™½ç„¶ç®€å•ï¼Œä½†æå¤§â€Œåœ°æå‡äº†æ™ºèƒ½ä½“çš„å®ç”¨æ€§å’Œå®‰å…¨æ€§ã€‚

4ï¼‰å·¥å…·é›†åˆ ToolCollection

OpenMâ anus è®¾è®¡äº† Tâ€ŒoolCollection ç±»æ¥ç®¡ç†å¤šä¸ªâ€å·¥å…·å®ä¾‹ï¼Œæä¾›ç»Ÿä¸€çš„â€Œå·¥å…·æ³¨å†Œå’Œæ‰§è¡Œæ¥å£ï¼š

```
class ToolCollection:  
    """A collection of defined tools."""  
  
    def __init__(self, *tools: BaseTool):  
        self.tools = tools  
        self.tool_map = {tool.name: tool for tool in tools}  
  
    def to_params(self) -> List[Dict[str, Any]]:  
        return [tool.to_param() for tool in self.tools]  
  
    async def execute(self, *, name: str, tool_input: Dict[str, Any] = None) -> ToolResult:  
        tool = self.tool_map.get(name)  
        if not tool:  
            return ToolFailure(error=f"Tool {name} is invalid")  
        try:  
            result = await tool(**tool_input)  
            return result  
        except ToolError as e:  
            return ToolFailure(error=e.message)  
              
    def add_tools(self, *tools: BaseTool):  
        """Add multiple tools to the collection."""  
        for tool in tools:  
            self.add_tool(tool)  
        return self
```

è¿™ç§è®¾è®¡ä½¿å¾— Oâ penManus å¯ä»¥çµæ´»åœ°æ·»â€ŒåŠ ã€ç§»é™¤å’Œç®¡ç†å·¥å…·ï¼Œå®ç°äº†å·¥å…·ç³»ç»Ÿçš„å¯æ’æ‹”æ€§ã€‚æˆ‘ä»¬ä¹‹å‰åˆ©ç”¨ â€Spring AI å¼€å‘å·¥å…·è°ƒâ€Œç”¨æ—¶ï¼Œä¹Ÿå†™äº†ä¸ªç±»ä¼¼çš„å·¥å…·æ³¨å†Œç±»ã€‚

#### 2ã€MCP åè®®æ”¯æŒ

1ï¼‰MCP ä¸å·¥å…·ç³»ç»Ÿçš„é›†æˆ

è¿˜è®°å¾—ä¹ˆï¼Œä¹‹å‰é±¼çš®åœ¨æ•™ç¨‹ä¸­æåˆ°è¿‡ â€œMCP çš„æœ¬è´¨å°±æ˜¯å·¥å…·è°ƒç”¨â€ï¼ŒOpenManus çš„å®ç°ä¹Ÿæ˜¯éµå¾ªäº†è¿™ä¸€æ€æƒ³ã€‚é€šè¿‡ `MCPClients` ç±»ï¼ˆç»§æ‰¿è‡ª ToolCollectionï¼‰å°† MCP æœåŠ¡é›†æˆåˆ°ç°æœ‰å·¥å…·ç³»ç»Ÿä¸­ã€‚æŸ¥çœ‹ `tool/mcp.py` çš„æºç ï¼š

```
class MCPClients(ToolCollection):  
    """  
    A collection of tools that connects to multiple MCP servers and manages available tools through the Model Context Protocol.  
    """  
  
    sessions: Dict[str, ClientSession] = {}  
    exit_stacks: Dict[str, AsyncExitStack] = {}  
    description: str = "MCP client tools for server interaction"  
  
    def __init__(self):  
        super().__init__()  
        self.name = "mcp"  
```

2ï¼‰åŠ¨æ€å·¥å…·ä»£ç†

æ¯å½“è¿æ¥åˆ° MCP æœåŠ¡å™¨æ—¶ï¼ŒOpenManus ä¼šåŠ¨æ€åˆ›å»º `MCPClientTool` å®ä¾‹ï¼ˆç»§æ‰¿è‡ª BaseToolï¼‰ä½œä¸ºæ¯ä¸ªè¿œç¨‹å·¥å…·çš„ä»£ç†ã€‚æŸ¥çœ‹ `tool/mcp.py` çš„æºç ï¼Œé€šè¿‡å‘ MCP æœåŠ¡å™¨å‘é€è¿œç¨‹è¯·æ±‚æ¥æ‰§è¡Œå·¥å…·ï¼š

```
class MCPClientTool(BaseTool):  
    """Represents a tool proxy that can be called on the MCP server from the client side."""  
  
    session: Optional[ClientSession] = None  
    server_id: str = ""  
    original_name: str = ""  
  
    async def execute(self, **kwargs) -> ToolResult:  
        """Execute the tool by making a remote call to the MCP server."""  
        if not self.session:  
            return ToolResult(error="Not connected to MCP server")  
  
        try:  
            result = await self.session.call_tool(self.original_name, kwargs)  
            content_str = ", ".join(  
                item.text for item in result.content if isinstance(item, TextContent)  
            )  
            return ToolResult(output=content_str or "No output returned.")  
        except Exception as e:  
            return ToolResult(error=f"Error executing tool: {str(e)}")
```

3ï¼‰Manus ä¸­çš„ MCP é›†æˆæœºåˆ¶

Manus æ™ºèƒ½ä½“ **é€šè¿‡å·¥å…·è°ƒç”¨** å®ç°äº†ä¸ MCP æœåŠ¡å™¨çš„æ— ç¼é›†æˆã€‚æŸ¥çœ‹ `agent/manus.py` çš„æºç ï¼Œå‘ç°æœ¬è´¨ä¸Šæ˜¯æŠŠ MCP æœåŠ¡æä¾›çš„å·¥å…·åŠ¨æ€æ·»åŠ åˆ°å¯ç”¨çš„å·¥å…·é›†åˆä¸­ï¼š

```
async def connect_mcp_server(  
    self,  
    server_url: str,  
    server_id: str = "",  
    use_stdio: bool = False,  
    stdio_args: List[str] = None,  
) -> None:  
    """Connect to an MCP server and add its tools."""  
    if use_stdio:  
        await self.mcp_clients.connect_stdio(server_url, stdio_args or [], server_id)  
    else:  
        await self.mcp_clients.connect_sse(server_url, server_id)  
      
    
    new_tools = [  
        tool for tool in self.mcp_clients.tools if tool.server_id == server_id  
    ]  
    self.available_tools.add_tools(*new_tools)
```

è¿™æ ·ä¸€æ¥ï¼Œâ å¯¹å¤§æ¨¡å‹æ¥è¯´ï¼ŒMCâ€ŒP å·¥å…·ä¸æœ¬åœ°å·¥å…·çš„è°ƒç”¨æ–¹å¼ä¸€è‡´ï¼Œå¾ˆâ€å·§å¦™åœ°å¤ç”¨äº†ä»£ç ã€‚

#### 3ã€å…¶ä»–å€¼å¾—å­¦ä¹ çš„æºç 

1ï¼‰Python ä»£ç æ‰§è¡Œæ²™ç®±

`PythonExecute` å·¥å…·å®ç°äº†ä¸€ä¸ªå®‰å…¨çš„ Python ä»£ç æ‰§è¡Œç¯å¢ƒï¼Œè¿™æ˜¯ä¸€ä¸ªå€¼å¾—å­¦ä¹ çš„å®‰å…¨å®ç°ã€‚æŸ¥çœ‹ `tool/python_execute.py` æºç ï¼š

```
class PythonExecute(BaseTool):  
    name: str = "python_execute"  
      
    async def execute(self, code: str, timeout: int = 5) -> Dict:  
        """å®‰å…¨æ‰§è¡Œ Python ä»£ç """  
        with multiprocessing.Manager() as manager:  
            result = manager.dict({"observation": "", "success": False})  
            
            safe_globals = {"__builtins__": __builtins__.__dict__.copy()}  
            
            proc = multiprocessing.Process(  
                target=self._run_code, args=(code, result, safe_globals)  
            )  
            proc.start()  
            proc.join(timeout)  
  
            
            if proc.is_alive():  
                proc.terminate()  
                proc.join(1)  
                return {  
                    "observation": f"Execution timeout after {timeout} seconds",  
                    "success": False,  
                }  
            return dict(result)
```

è¿™æ®µä»£ç å±•ç¤ºäº†å‡ ä¸ªå®‰å…¨ç¼–ç¨‹çš„æœ€ä½³å®è·µï¼š

- ä½¿ç”¨ç‹¬ç«‹è¿›ç¨‹éš”ç¦»ä»£ç æ‰§è¡Œ
- å®ç°äº†è¶…æ—¶æœºåˆ¶é˜²æ­¢æ— é™å¾ªç¯
- æˆªè·å’Œå¤„ç†æ‰€æœ‰å¼‚å¸¸
- é‡å®šå‘æ ‡å‡†è¾“å‡ºä»¥æ•è·æ‰“å°å†…å®¹

2ï¼‰çŠ¶æ€ç®¡ç†ä¸ä¸Šä¸‹æ–‡åˆ‡æ¢æœºåˆ¶

`BaseAgent` å®ç°äº†ä¸€ä¸ªä¼˜é›…çš„çŠ¶æ€ç®¡ç†å’Œä¸Šä¸‹æ–‡åˆ‡æ¢æœºåˆ¶ï¼š

```
@asynccontextmanager  
async def state_context(self, new_state: AgentState):  
    """Context manager for safe agent state transitions."""  
    if not isinstance(new_state, AgentState):  
        raise ValueError(f"Invalid state: {new_state}")  
  
    previous_state = self.state  
    self.state = new_state  
    try:  
        yield  
    except Exception as e:  
        self.state = AgentState.ERROR  
        raise e  
    finally:  
        self.state = previous_state  
```

è¿™ä¸ªä¸Šä¸‹æ–‡â ç®¡ç†å™¨ç¡®ä¿äº†çŠ¶æ€è½¬â€Œæ¢çš„å®‰å…¨æ€§å’Œå¯é æ€§ï¼Œå³ä½¿åœ¨å¼‚å¸¸æƒ…å†µä¸‹â€ä¹Ÿèƒ½æ­£ç¡®æ¢å¤çŠ¶æ€ï¼Œâ€Œæ˜¯ä¸€ä¸ªå€¼å¾—å­¦ä¹ çš„è®¾è®¡æ¨¡å¼ã€‚

3ï¼‰å·¥å…·ç»“æœç»Ÿä¸€è¡¨ç¤ºä¸ç»„åˆ

OpenManus è®¾è®¡äº† `ToolResult` ç±»æ¥ç»Ÿä¸€è¡¨ç¤ºå·¥å…·æ‰§è¡Œç»“æœï¼Œå¹¶æ”¯æŒç»“æœç»„åˆã€‚æŸ¥çœ‹ `tool/base.py` æºç ï¼š

```
class ToolResult(BaseModel):  
    """Represents the result of a tool execution."""  
  
    output: Any = Field(default=None)  
    error: Optional[str] = Field(default=None)  
    base64_image: Optional[str] = Field(default=None)  
    system: Optional[str] = Field(default=None)  
      
    def __add__(self, other: "ToolResult"):  
        """ç»„åˆä¸¤ä¸ªå·¥å…·ç»“æœ"""  
        def combine_fields(field: Optional[str], other_field: Optional[str], concatenate: bool = True):  
            if field and other_field:  
                if concatenate:  
                    return field + other_field  
                raise ValueError("Cannot combine tool results")  
            return field or other_field  
  
        return ToolResult(  
            output=combine_fields(self.output, other.output),  
            error=combine_fields(self.error, other.error),  
            base64_image=combine_fields(self.base64_image, other.base64_image, False),  
            system=combine_fields(self.system, other.system),  
        )
```

è¿™ç§è®¾è®¡ä½¿â å¾—å·¥å…·ç»“æœå¤„ç†æ›´åŠ â€Œç»Ÿä¸€å’Œçµæ´»ï¼Œç‰¹åˆ«æ˜¯åœ¨éœ€è¦ç»„åˆå¤šä¸ªå·¥å…·â€ç»“æœæˆ–å¤„ç†å¼‚å¸¸æƒ…å†µâ€Œæ—¶ã€‚

## äº”ã€è‡ªä¸»å®ç° Manus æ™ºèƒ½ä½“

è™½ç„¶ OpenManus ä»£â ç é‡å¾ˆå¤§ï¼Œä½†å…¶å®å¾ˆå¤šä»£ç éƒ½æ˜¯åœ¨å®ç°æ™ºèƒ½ä½“æ‰€éœ€çš„æ”¯æŒç³»ç»Ÿâ€Œï¼Œæ¯”å¦‚è°ƒç”¨å¤§æ¨¡å‹ã€ä¼šè¯è®°å¿†ã€å·¥å…·è°ƒç”¨èƒ½åŠ›ç­‰ã€‚å¦‚æœä½¿ç”¨ AI å¼€å‘æ¡†æ¶ï¼Œè¿™äº›èƒ½åŠ›éƒ½ä¸éœ€è¦æˆ‘ä»¬è‡ªå·±å®ç°ï¼Œä»£ç é‡ä¼šç®€â€å•å¾ˆå¤šã€‚ä¸‹é¢å°±è®©æˆ‘ä»¬åŸºäº Spring AI æ¡†æ¶ï¼Œâ€Œå®ç°ä¸€ä¸ªç®€åŒ–ç‰ˆçš„ Manus æ™ºèƒ½ä½“ã€‚

### å®šä¹‰æ•°æ®æ¨¡å‹

æ–°å»º `agent.model` åŒ…ï¼Œå°†æ‰€æœ‰ç”¨åˆ°çš„æ•°æ®æ¨¡å‹ï¼ˆå®ä½“ç±»ã€æšä¸¾ç±»ç­‰ï¼‰éƒ½æ”¾åˆ°è¯¥åŒ…ä¸‹ã€‚

ç›®å‰æˆ‘ä»¬åªâ éœ€è¦å®šä¹‰ Agenâ€Œt çš„çŠ¶æ€æšä¸¾ï¼Œç”¨äºæ§åˆ¶æ™ºèƒ½ä½“çš„æ‰§è¡Œâ€ã€‚AgentStaâ€Œte ä»£ç å¦‚ä¸‹ï¼š

```
public enum AgentState {  
  
      
    IDLE,  
  
      
    RUNNING,  
  
      
    FINISHED,  
  
      
    ERROR  
}
```

### æ ¸â å¿ƒæ¶æ„å¼€å‘

é¦–å…ˆå®šä¹‰æ™ºèƒ½ä½“çš„æ ¸å¿ƒæ¶æ„ï¼ŒåŒ…æ‹¬ä»¥ä¸‹ç±»ï¼š

- BaseAgentï¼šæ™ºèƒ½ä½“åŸºç±»ï¼Œå®šä¹‰åŸºæœ¬ä¿¡æ¯å’Œå¤šæ­¥éª¤æ‰§è¡Œæµç¨‹
- ReActAgentï¼šå®ç°æ€è€ƒå’Œè¡ŒåŠ¨ä¸¤ä¸ªæ­¥éª¤çš„æ™ºèƒ½ä½“
- ToolCallAgentï¼šå®ç°å·¥å…·è°ƒç”¨èƒ½åŠ›çš„æ™ºèƒ½ä½“
- LeeManusï¼šæœ€ç»ˆå¯ä½¿ç”¨çš„ Manus å®ä¾‹

#### 1ã€å¼€å‘åŸºç¡€ Agent ç±»

å‚è€ƒ Opâ enManus çš„â€Œå®ç°æ–¹å¼ï¼ŒBaseAgent çš„ä»£ç â€å¦‚ä¸‹ï¼š

```java
@Data  
@Slf4j  
public abstract class BaseAgent {  
  
    
    private String name;  
  
    
    private String systemPrompt;  
    private String nextStepPrompt;  
  
    
    private AgentState state = AgentState.IDLE;  
  
    
    private int maxSteps = 10;  
    private int currentStep = 0;  
  
    // LLM å¤§æ¨¡å‹
    private ChatClient chatClient;  
  
    
    private List<Message> messageList = new ArrayList<>();  
  
      
    public String run(String userPrompt) {  
        if (this.state != AgentState.IDLE) {  
            throw new RuntimeException("Cannot run agent from state: " + this.state);  
        }  
        if (StringUtil.isBlank(userPrompt)) {  
            throw new RuntimeException("Cannot run agent with empty user prompt");  
        }  
        
        state = AgentState.RUNNING;  
        
        messageList.add(new UserMessage(userPrompt));  
        
        List<String> results = new ArrayList<>();  
        try {  
            for (int i = 0; i < maxSteps && state != AgentState.FINISHED; i++) {  
                int stepNumber = i + 1;  
                currentStep = stepNumber;  
                log.info("Executing step " + stepNumber + "/" + maxSteps);  
                
                String stepResult = step();  
                String result = "Step " + stepNumber + ": " + stepResult;  
                results.add(result);  
            }  
            
            if (currentStep >= maxSteps) {  
                state = AgentState.FINISHED;  
                results.add("Terminated: Reached max steps (" + maxSteps + ")");  
            }  
            return String.join("\n", results);  
        } catch (Exception e) {  
            state = AgentState.ERROR;  
            log.error("Error executing agent", e);  
            return "æ‰§è¡Œé”™è¯¯" + e.getMessage();  
        } finally {  
            
            this.cleanup();  
        }  
    }  
  
      
    public abstract String step();  
  
      
    protected void cleanup() {  
        
    }  
}
```

ä¸Šè¿°ä»£ç ä¸­ï¼Œæˆ‘ä»¬è¦æ³¨æ„ 3 ç‚¹ï¼š

1. åŒ…å« chatClient å±æ€§ï¼Œç”±è°ƒç”¨æ–¹ä¼ å…¥å…·ä½“è°ƒç”¨å¤§æ¨¡å‹çš„å¯¹è±¡ï¼Œè€Œä¸æ˜¯å†™æ­»ä½¿ç”¨çš„å¤§æ¨¡å‹ï¼Œæ›´çµæ´»
2. åŒ…å« messageList å±æ€§ï¼Œç”¨äºç»´æŠ¤æ¶ˆæ¯ä¸Šä¸‹æ–‡åˆ—è¡¨
3. é€šè¿‡ state å±æ€§æ¥æ§åˆ¶æ™ºèƒ½ä½“çš„æ‰§è¡Œæµç¨‹

#### 2ã€å¼€å‘ ReActAgent ç±»

å‚è€ƒ OpenMâ anus çš„å®ç°æ–¹å¼ï¼Œç»§æ‰¿è‡ª â€ŒBaseAgentï¼Œå¹¶ä¸”å°† step æ–¹æ³•åˆ†è§£ä¸º thinkâ€ å’Œ act ä¸¤ä¸ªæŠ½è±¡æ–¹æ³•ã€‚Râ€ŒeActAgent çš„ä»£ç å¦‚ä¸‹ï¼š

```
@EqualsAndHashCode(callSuper = true)  
@Data  
public abstract class ReActAgent extends BaseAgent {  
  
      
    public abstract boolean think();  
  
      
    public abstract String act();  
  
      
    @Override  
    public String step() {  
        try {  
            boolean shouldAct = think();  
            if (!shouldAct) {  
                return "æ€è€ƒå®Œæˆ - æ— éœ€è¡ŒåŠ¨";  
            }  
            return act();  
        } catch (Exception e) {  
            
            e.printStackTrace();  
            return "æ­¥éª¤æ‰§è¡Œå¤±è´¥: " + e.getMessage();  
        }  
    }  
}
```

#### 3ã€å¼€å‘ ToolCallAgent ç±»

ToolCaâ llAgent è´Ÿè´£å®ç°â€Œå·¥å…·è°ƒç”¨èƒ½åŠ›ï¼Œç»§æ‰¿è‡ª ReActAgentï¼Œå…·ä½“â€å®ç°äº† think å’Œ â€Œact ä¸¤ä¸ªæŠ½è±¡æ–¹æ³•ã€‚

æˆ‘ä»¬æœ‰ 3 ç§æ–¹æ¡ˆæ¥å®ç° ToolCallAgentï¼š

1ï¼‰åŸºäº â Spring AIâ€Œ çš„å·¥å…·è°ƒç”¨èƒ½åŠ›ï¼Œæ‰‹åŠ¨æ§åˆ¶å·¥å…·æ‰§è¡Œã€‚

å…¶å® Spring çš„ ChatClient å·²ç»æ”¯æŒé€‰æ‹©å·¥å…·è¿›è¡Œè°ƒç”¨ï¼ˆå†…éƒ¨å®Œæˆäº† thinkã€actã€observeï¼‰ï¼Œä½†è¿™é‡Œæˆ‘ä»¬è¦è‡ªä¸»å®ç°ï¼Œå¯ä»¥ä½¿ç”¨ Spring AI æä¾›çš„ [æ‰‹åŠ¨æ§åˆ¶å·¥å…·æ‰§è¡Œ](https://docs.spring.io/spring-ai/reference/api/tools.html#_user_controlled_tool_execution)ã€‚

2ï¼‰åŸºäº â Spring AIâ€Œ çš„å·¥å…·è°ƒç”¨èƒ½åŠ›ï¼Œç®€åŒ–è°ƒç”¨æµç¨‹ã€‚

ç”±äº Sprâ ing AI å®Œå…¨æ‰˜ç®¡äº†â€Œå·¥å…·è°ƒç”¨ï¼Œæˆ‘ä»¬å¯ä»¥ç›´æ¥æŠŠæ‰€æœ‰å·¥å…·è°ƒç”¨çš„ä»£ç ä½œä¸º â€think æ–¹æ³•ï¼Œè€Œ aâ€Œct æ–¹æ³•ä¸å®šä¹‰ä»»ä½•åŠ¨ä½œã€‚

3ï¼‰è‡ªä¸»å®ç°å·¥å…·è°ƒç”¨èƒ½åŠ›ã€‚

ä¹Ÿå°±æ˜¯å·¥å…·è°ƒç”¨â ç« èŠ‚æåˆ°çš„å®ç°åŸç†ï¼šè‡ªå·±å†™â€Œ Promptï¼Œå¼•å¯¼ AI å›å¤æƒ³è¦è°ƒç”¨çš„å·¥å…·åˆ—è¡¨å’Œâ€è°ƒç”¨å‚æ•°ï¼Œç„¶åå†æ‰§è¡Œå·¥å…·å¹¶â€Œå°†ç»“æœè¿”é€ç»™ AI å†æ¬¡æ‰§è¡Œã€‚

ä½¿ç”¨å“ªç§æ–¹æ¡ˆå‘¢ï¼Ÿ

å¦‚æœæ˜¯ä¸ºäº†å­¦â ä¹  ReAct æ¨¡å¼ï¼Œè®©â€Œæµç¨‹æ›´æ¸…æ™°ï¼Œæ¨èç¬¬ä¸€ç§ï¼›å¦‚æœåªæ˜¯ä¸ºäº†å¿«é€Ÿå®ç°ï¼Œæ¨â€èç¬¬äºŒç§ï¼›ä¸å»ºè®®é‡‡ç”¨ç¬¬ä¸‰â€Œç§æ–¹æ¡ˆï¼Œè¿‡äºåŸç”Ÿï¼Œå¼€å‘æˆæœ¬é«˜ã€‚

ä¸‹é¢æˆ‘ä»¬é‡‡â ç”¨ç¬¬ä¸€ç§æ–¹æ¡ˆå®ç° â€ŒToolCallAgentï¼Œå…ˆå®šä¹‰æ‰€â€éœ€çš„å±æ€§å’Œæ„é€ æ–¹æ³•â€Œï¼š

```
@EqualsAndHashCode(callSuper = true)  
@Data  
@Slf4j  
public class ToolCallAgent extends ReActAgent {  
  
    
    private final ToolCallback[] availableTools;  
  
    
    private ChatResponse toolCallChatResponse;  
  
    
    private final ToolCallingManager toolCallingManager;  
  
    
    private final ChatOptions chatOptions;  
  
    public ToolCallAgent(ToolCallback[] availableTools) {  
        super();  
        this.availableTools = availableTools;  
        this.toolCallingManager = ToolCallingManager.builder().build();  
        
        this.chatOptions = DashScopeChatOptions.builder()  
                .withProxyToolCalls(true)  
                .build();  
    }  
}
```

æ³¨æ„ï¼Œåœ¨ä¸Šè¿°ä»£ç ä¸­â ï¼Œæˆ‘ä»¬é€šè¿‡å°† DashScopeChâ€ŒatOptions çš„ withProxyToolCalls é€‰é¡¹è®¾ç½®ä¸ºâ€ trueï¼Œæ¥ç¦æ­¢ Spring Aâ€ŒI æ‰˜ç®¡å·¥å…·è°ƒç”¨ï¼Œè€Œæ˜¯æˆ‘ä»¬è‡ªä¸»å®ç°ã€‚

è™½ç„¶å®˜æ–¹æä¾›çš„ç¤ºä¾‹ä»£ç æ˜¯è®¾â ç½® internalToolExecutionEnaâ€Œbled ä¸º false æ¥ç¦ç”¨ Spring AI æ‰˜ç®¡å·¥å…·è°ƒç”¨ï¼Œä½†æ˜¯ç”±äºæˆ‘ä»¬ä½¿ç”¨çš„æ˜¯é˜¿é‡Œçš„ Dashâ€ScopeChatModel å¤§æ¨¡å‹å®¢æˆ·ç«¯ï¼Œå¦‚æœæŒ‰ç…§â€Œä¸‹é¢çš„æ–¹å¼ï¼Œä¼šç›´æ¥å¯¼è‡´å·¥å…·è°ƒç”¨å¤±æ•ˆï¼

```
ChatOptions chatOptions = ToolCallingChatOptions.builder()  
    .toolCallbacks(new CustomerTools())  
    .internalToolExecutionEnabled(false)  
    .build();
```

ä¸‹é¢æˆ‘ä»¬å®â ç° think æ–¹â€Œæ³•ï¼Œä¼ å…¥å·¥å…·åˆ—è¡¨å¹¶è°ƒç”¨å¤§æ¨¡å‹ï¼Œå¾—åˆ°éœ€â€è¦è°ƒç”¨çš„å·¥å…·åˆ—è¡¨ï¼š

```
@Override  
public boolean think() {  
    if (getNextStepPrompt() != null && !getNextStepPrompt().isEmpty()) {  
        UserMessage userMessage = new UserMessage(getNextStepPrompt());  
        getMessageList().add(userMessage);  
    }  
    List<Message> messageList = getMessageList();  
    Prompt prompt = new Prompt(messageList, chatOptions);  
    try {  
        
        ChatResponse chatResponse = getChatClient().prompt(prompt)  
                .system(getSystemPrompt())  
                .tools(availableTools)  
                .call()  
                .chatResponse();  
        
        this.toolCallChatResponse = chatResponse;  
        AssistantMessage assistantMessage = chatResponse.getResult().getOutput();  
        
        String result = assistantMessage.getText();  
        List<AssistantMessage.ToolCall> toolCallList = assistantMessage.getToolCalls();  
        log.info(getName() + "çš„æ€è€ƒ: " + result);  
        log.info(getName() + "é€‰æ‹©äº† " + toolCallList.size() + " ä¸ªå·¥å…·æ¥ä½¿ç”¨");  
        String toolCallInfo = toolCallList.stream()  
                .map(toolCall -> String.format("å·¥å…·åç§°ï¼š%sï¼Œå‚æ•°ï¼š%s",  
                        toolCall.name(),  
                        toolCall.arguments())  
                )  
                .collect(Collectors.joining("\n"));  
        log.info(toolCallInfo);  
        if (toolCallList.isEmpty()) {  
            
            getMessageList().add(assistantMessage);  
            return false;  
        } else {  
            
            return true;  
        }  
    } catch (Exception e) {  
        log.error(getName() + "çš„æ€è€ƒè¿‡ç¨‹é‡åˆ°äº†é—®é¢˜: " + e.getMessage());  
        getMessageList().add(  
                new AssistantMessage("å¤„ç†æ—¶é‡åˆ°é”™è¯¯: " + e.getMessage()));  
        return false;  
    }  
}
```

æœ€åå®ç° â act æ–¹æ³•ï¼Œæ‰§è¡Œâ€Œå·¥å…·è°ƒç”¨åˆ—è¡¨ï¼Œå¾—åˆ°è¿”å›ç»“æœï¼Œå¹¶å°†å·¥å…·â€çš„å“åº”æ·»åŠ åˆ°æ¶ˆæ¯åˆ—â€Œè¡¨ä¸­ï¼š

```
@Override  
public String act() {  
    if (!toolCallChatResponse.hasToolCalls()) {  
        return "æ²¡æœ‰å·¥å…·è°ƒç”¨";  
    }  
    
    Prompt prompt = new Prompt(getMessageList(), chatOptions);  
    ToolExecutionResult toolExecutionResult = toolCallingManager.executeToolCalls(prompt, toolCallChatResponse);  
    
    setMessageList(toolExecutionResult.conversationHistory());  
    
    ToolResponseMessage toolResponseMessage = (ToolResponseMessage) CollUtil.getLast(toolExecutionResult.conversationHistory());  
    String results = toolResponseMessage.getResponses().stream()  
            .map(response -> "å·¥å…· " + response.name() + " å®Œæˆäº†å®ƒçš„ä»»åŠ¡ï¼ç»“æœ: " + response.responseData())  
            .collect(Collectors.joining("\n"));  
    log.info(results);  
    return results;  
}
```

æ³¨æ„ç»´æŠ¤æ¶ˆæ¯ä¸Šä¸‹æ–‡ï¼Œä¸è¦é‡å¤æ·»åŠ äº†æ¶ˆæ¯ï¼Œå› ä¸º `toolExecutionResult.conversationHistory()` æ–¹æ³•å·²ç»åŒ…å«äº†åŠ©æ‰‹æ¶ˆæ¯å’Œå·¥å…·è°ƒç”¨è¿”å›çš„ç»“æœã€‚

å¯ä»¥å¸¦çœ‹ä¸‹ toolCallingManager.executeToolCalls çš„æºç ï¼Œä¼šè‡ªåŠ¨è¿½åŠ åŠ©æ‰‹æ¶ˆæ¯åˆ°ä¸Šä¸‹æ–‡ä¸­ï¼š

åƒä¸‡åˆ«å¿˜äº†â ï¼Œæˆ‘ä»¬è¿˜éœ€è¦å®šä¹‰ä¸€â€Œä¸ªç»ˆæ­¢å·¥å…·ï¼Œè®©æ™ºèƒ½ä½“å¯ä»¥è‡ªè¡Œå†³å®šä»»â€åŠ¡ç»“æŸã€‚

1ï¼‰åœ¨ tools åŒ…ä¸‹æ–°å»º TerminateToolï¼š

```
public class TerminateTool {  
  
    @Tool(description = """  
            Terminate the interaction when the request is met OR if the assistant cannot proceed further with the task.  
            "When you have finished all the tasks, call this tool to end the work.  
            """)  
    public String doTerminate() {  
        return "ä»»åŠ¡ç»“æŸ";  
    }  
}
```

2ï¼‰ä¿®æ”¹ ToolRegistrationï¼Œæ³¨å†Œä¸­æ­¢å·¥å…·ï¼š

```
TerminateTool terminateTool = new TerminateTool();  
  
return ToolCallbacks.from(  
        fileOperationTool,  
        webSearchTool,  
        webScrapingTool,  
        resourceDownloadTool,  
        terminalOperationTool,  
        pdfGenerationTool,  
        terminateTool  
);
```

3ï¼‰å®Œå–„ â act æ–¹æ³•ï¼Œå½“è°ƒâ€Œç”¨äº†ç»ˆæ­¢å·¥å…·æ—¶ï¼Œä¿®æ”¹ agent çš„â€çŠ¶æ€ä¸º â€œå·²ç»“æŸâ€â€Œï¼š

```
ToolResponseMessage toolResponseMessage = (ToolResponseMessage) CollUtil.getLast(toolExecutionResult.conversationHistory());  
String results = toolResponseMessage.getResponses().stream()  
        .map(response -> "å·¥å…· " + response.name() + " å®Œæˆäº†å®ƒçš„ä»»åŠ¡ï¼ç»“æœ: " + response.responseData())  
        .collect(Collectors.joining("\n"));  

boolean terminateToolCalled = toolResponseMessage.getResponses().stream()  
        .anyMatch(response -> "doTerminate".equals(response.name()));  
if (terminateToolCalled) {  
    setState(AgentState.FINISHED);  
}  
log.info(results);  
return results;
```

#### 4ã€å¼€å‘ LeeManus ç±»

LeeManus æ˜¯â å¯ä»¥ç›´æ¥æä¾›ç»™å…¶ä»–æ–¹æ³•è°ƒç”¨çš„ AIâ€Œ è¶…çº§æ™ºèƒ½ä½“å®ä¾‹ï¼Œç»§æ‰¿è‡ª ToolCallAgentï¼Œéœ€è¦ç»™æ™ºèƒ½ä½“è®¾â€ç½®å„ç§å‚æ•°ï¼Œæ¯”å¦‚å¯¹è¯å®¢æˆ·ç«¯ chaâ€ŒtClientã€å·¥å…·è°ƒç”¨åˆ—è¡¨ç­‰ã€‚

ä»£ç å¦‚ä¸‹ï¼š

```
@Component  
public class LeeManus extends ToolCallAgent {  
  
    public LeeManus(ToolCallback[] allTools, ChatModel dashscopeChatModel) {  
        super(allTools);  
        this.setName("yuManus");  
        String SYSTEM_PROMPT = """  
                You are YuManus, an all-capable AI assistant, aimed at solving any task presented by the user.  
                You have various tools at your disposal that you can call upon to efficiently complete complex requests.  
                """;  
        this.setSystemPrompt(SYSTEM_PROMPT);  
        String NEXT_STEP_PROMPT = """  
                Based on user needs, proactively select the most appropriate tool or combination of tools.  
                For complex tasks, you can break down the problem and use different tools step by step to solve it.  
                After using each tool, clearly explain the execution results and suggest the next steps.  
                If you want to stop the interaction at any point, use the `terminate` tool/function call.  
                """;  
        this.setNextStepPrompt(NEXT_STEP_PROMPT);  
        this.setMaxSteps(20);  
        
        ChatClient chatClient = ChatClient.builder(dashscopeChatModel)  
                .defaultAdvisors(new MyLoggerAdvisor())  
                .build();  
        this.setChatClient(chatClient);  
    }  
}
```

### æµ‹è¯•æ™ºèƒ½ä½“

ç¼–å†™å•å…ƒæµ‹è¯•ç±»ï¼Œè®©è¶…çº§æ™ºèƒ½ä½“å®Œæˆä¸€ä¸ªè¾ƒä¸ºå¤æ‚çš„ä»»åŠ¡ï¼š

```java
@SpringBootTest  
class YuManusTest {  
  
    @Resource  
    private YuManus yuManus;  
  
    @Test  
    void run() {  
        String userPrompt = """  
                æˆ‘çš„å¦ä¸€åŠå±…ä½åœ¨ä¸Šæµ·é™å®‰åŒºï¼Œè¯·å¸®æˆ‘æ‰¾åˆ° 5 å…¬é‡Œå†…åˆé€‚çš„çº¦ä¼šåœ°ç‚¹ï¼Œ  
                å¹¶ç»“åˆä¸€äº›ç½‘ç»œå›¾ç‰‡ï¼Œåˆ¶å®šä¸€ä»½è¯¦ç»†çš„çº¦ä¼šè®¡åˆ’ï¼Œ  
                å¹¶ä»¥ PDF æ ¼å¼è¾“å‡º""";  
        String answer = yuManus.run(userPrompt);  
        Assertions.assertNotNull(answer);  
    }  
}
```

ä»¥ Debâ ug æ¨¡å¼è¿è¡Œï¼Œèƒ½â€Œå¤ŸæŸ¥çœ‹åˆ° AI æ¯ä¸€æ­¥çš„æ€è€ƒè¿‡ç¨‹ï¼š

## å…­ã€æ‰©å±•çŸ¥è¯†

### æ™ºèƒ½ä½“å·¥ä½œæµ

å½“æˆ‘ä»¬é¢å¯¹å¤æ‚ä»»â åŠ¡æ—¶ï¼Œå•ä¸€æ™ºèƒ½ä½“å¯èƒ½æ— æ³•æ»¡è¶³éœ€â€Œæ±‚ã€‚å› æ­¤æ™ºèƒ½ä½“å·¥ä½œæµï¼ˆAgent Workflowï¼‰åº”è¿è€Œç”Ÿâ€ï¼Œé€šè¿‡ç®€å•çš„ç¼–æ’ï¼Œå…è®¸å¤šä¸ªä¸“ä¸šâ€Œæ™ºèƒ½ä½“ååŒå·¥ä½œï¼Œå„å¸å…¶èŒã€‚

æ™ºèƒ½ä½“å·¥ä½œæµç¼–æ’çš„ç²¾é«“åœ¨äº **å°†å¤æ‚ä»»åŠ¡åˆ†è§£ä¸ºè¿è´¯çš„èŠ‚ç‚¹é“¾**ï¼Œæ¯ä¸ªèŠ‚ç‚¹ç”±æœ€é€‚åˆçš„æ™ºèƒ½ä½“å¤„ç†ï¼ŒèŠ‚ç‚¹é—´é€šè¿‡æ¡ä»¶è·¯ç”±çµæ´»è¿æ¥ï¼Œå½¢æˆä¸€ä¸ªé«˜æ•ˆã€å¯é çš„æ‰§è¡Œç½‘ç»œã€‚

Anthropic æ›¾ç»åœ¨ä¸€ç¯‡ [ç ”ç©¶æŠ¥å‘Šã€ŠBuilding effective agentsã€‹](https://www.anthropic.com/engineering/building-effective-agents?spm=4347728f.4638ae38.0.0.54b97646EY5Jbw) ä¸­æåˆ°äº†å¤šç§ä¸åŒçš„æ™ºèƒ½ä½“å·¥ä½œæ¨¡å¼ï¼Œå¤§å®¶éœ€è¦äº†è§£æ¯ç§æ¨¡å¼çš„ç‰¹ç‚¹å’Œé€‚ç”¨åœºæ™¯ã€‚

#### æ™ºèƒ½ä½“å·¥ä½œæ¨¡å¼

1ï¼‰Prompt Chaining æç¤ºé“¾å·¥ä½œæµ

Prompt Câ haining æ˜¯æœ€å¸¸è§çš„æ™ºèƒ½ä½“â€Œå·¥ä½œæµæ¨¡å¼ä¹‹ä¸€ã€‚å®ƒçš„æ ¸å¿ƒæ€æƒ³æ˜¯å°†ä¸€ä¸ªå¤æ‚ä»»åŠ¡æ‹†è§£ä¸ºä¸€ç³»åˆ—æœ‰åºçš„å­â€ä»»åŠ¡ï¼Œæ¯ä¸€æ­¥ç”± LLM å¤„ç†å‰ä¸€â€Œæ­¥çš„è¾“å‡ºï¼Œé€æ­¥æ¨è¿›ä»»åŠ¡å®Œæˆã€‚

æ¯”å¦‚åœ¨å†…å®¹ç”Ÿæˆâ åœºæ™¯ä¸­ï¼Œå¯ä»¥å…ˆè®©æ¨¡å‹ç”Ÿæˆå¤§â€Œçº²ï¼Œå†æ ¹æ®å¤§çº²ç”Ÿæˆè¯¦ç»†å†…å®¹ï¼Œæœ€åè¿›è¡Œæ¶¦è‰²å’Œæ ¡å¯¹ã€‚æ¯ä¸€â€æ­¥éƒ½å¯ä»¥æ’å…¥æ ¡éªŒå’Œä¸­é—´æ£€æŸ¥â€Œï¼Œç¡®ä¿æµç¨‹æ­£ç¡®ã€è¾“å‡ºæ›´ç²¾å‡†ã€‚

è¿™ç§æ¨¡å¼ç»“â æ„æ¸…æ™°ï¼Œæ˜“äºè°ƒè¯•ï¼Œâ€Œéå¸¸é€‚åˆä»»åŠ¡å¯ä»¥è¢«è‡ªç„¶åˆ†è§£ä¸ºå¤šä¸ªé˜¶æ®µâ€çš„åœºæ™¯ã€‚

2ï¼‰Routing è·¯ç”±åˆ†æµå·¥ä½œæµ

Routing â å·¥ä½œæµæ¨¡å¼åˆ™æ›´åƒæ˜¯ä¸€ä¸ªæ™ºèƒ½çš„è·¯ç”±â€Œå™¨ã€‚ç³»ç»Ÿä¼šæ ¹æ®è¾“å…¥å†…å®¹çš„ç±»å‹æˆ–ç‰¹å¾ï¼Œå°†ä»»åŠ¡åˆ†å‘ç»™æœ€åˆé€‚çš„ä¸‹â€æ¸¸æ™ºèƒ½ä½“æˆ–å¤„ç†æµç¨‹ã€‚éå¸¸é€‚åˆå¤šâ€Œæ ·åŒ–è¾“å…¥å’Œå¤šç§å¤„ç†ç­–ç•¥çš„åœºæ™¯ã€‚

æ¯”å¦‚åœ¨å®¢æœç³»ç»Ÿä¸­ï¼Œâ å¯ä»¥å°†å¸¸è§é—®é¢˜ã€é€€æ¬¾è¯·æ±‚ã€æŠ€æœ¯æ”¯æŒç­‰â€Œåˆ†æµåˆ°ä¸åŒçš„å¤„ç†æ¨¡å—ï¼›åœ¨å¤šæ¨¡å‹ç³»ç»Ÿä¸­ï¼Œå¯ä»¥å°†ç®€å•é—®é¢˜åˆ†é…ç»™å°æ¨¡å‹ï¼Œå¤æ‚é—®â€é¢˜äº¤ç»™å¤§æ¨¡å‹ã€‚è¿™æ ·æ—¢æé«˜äº†å¤„ç†æ•ˆç‡ï¼Œâ€Œä¹Ÿä¿è¯äº†æ¯ç±»é—®é¢˜éƒ½èƒ½å¾—åˆ°æœ€ä¼˜è§£ç­”ã€‚

3ï¼‰Parallelization å¹¶è¡ŒåŒ–å·¥ä½œæµ

åœ¨ Parâ allelizatiâ€Œon å¹¶è¡ŒåŒ–æ¨¡å¼ä¸‹ï¼Œä»»åŠ¡ä¼šè¢«æ‹†åˆ†ä¸ºå¤šä¸ªå¯â€ä»¥å¹¶è¡Œå¤„ç†çš„å­ä»»åŠ¡ï¼Œâ€Œæœ€åèšåˆå„è‡ªçš„ç»“æœã€‚

æ¯”å¦‚åœ¨ä»£ç å®‰å…¨å®¡æŸ¥åœºæ™¯â ä¸­ï¼Œå¯ä»¥è®©å¤šä¸ªæ™ºèƒ½ä½“åˆ†åˆ«å¯¹åŒä¸€æ®µä»£ç è¿›è¡Œå®‰å…¨â€Œå®¡æŸ¥ï¼Œæœ€å â€œæŠ•ç¥¨â€ å†³å®šæ˜¯å¦æœ‰é—®é¢˜ã€‚åˆæ¯”å¦‚åœ¨å¤„ç†é•¿æ–‡æ¡£æ—¶ï¼Œå¯ä»¥å°†æ–‡æ¡£åˆ†æ®µï¼Œæ¯æ®µç”±ä¸åŒæ™ºâ€èƒ½ä½“å¹¶è¡Œæ€»ç»“ã€‚è¿™ç§æ¨¡å¼å¯ä»¥æ˜¾è‘—æå‡å¤„ç†é€Ÿåº¦ï¼Œâ€Œå¹¶é€šè¿‡ â€œæŠ•ç¥¨â€ æœºåˆ¶æå‡ç»“æœçš„å‡†ç¡®åº¦ã€‚

4ï¼‰Orcâ hestratorâ€Œ-Workers åè°ƒå™¨ - æ‰§è¡Œè€…å·¥ä½œâ€æµ

å¯¹äºå¤æ‚çš„ä»»åŠ¡ã€å‚ä¸ä»»åŠ¡â çš„æ™ºèƒ½ä½“å¢å¤šæ—¶ï¼Œæˆ‘ä»¬å¯ä»¥å¼•å…¥ä¸€ä½ â€œç®¡ç†è€…â€ï¼Œä¼šâ€Œæ ¹æ®ä»»åŠ¡åŠ¨æ€æ‹†è§£å‡ºå¤šä¸ªå­ä»»åŠ¡ï¼Œå¹¶å°†è¿™äº›å­ä»»åŠ¡åˆ†é…ç»™å¤šä¸ª â€œå·¥äººâ€ æ™ºèƒ½ä½“ï¼Œæœ€åå†æ•´åˆæ‰€æœ‰å·¥äººâ€çš„ç»“æœã€‚è¿™ç§ä¸­å¤®åè°ƒæœºåˆ¶æé«˜äº†å¤æ‚ç³»ç»Ÿçš„æ•´ä½“æ•ˆç‡ï¼Œé€‚â€Œåˆä»»åŠ¡ç»“æ„ä¸ç¡®å®šã€éœ€è¦åŠ¨æ€åˆ†è§£çš„å¤æ‚åœºæ™¯ã€‚

5ï¼‰Evaâ luator-Opâ€Œtimizer è¯„ä¼° - ä¼˜åŒ–å¾ªç¯å·¥ä½œæµ

Evaluatoâ r-Optimizer æ¨¡å¼æ¨¡æ‹Ÿâ€Œäº†äººç±» â€œå†™ => è¯„ => æ”¹â€ çš„è¿‡ç¨‹ã€‚ä¸€ä¸ªæ™ºèƒ½ä½“è´Ÿè´£ç”Ÿæˆåˆâ€æ­¥ç»“æœï¼Œå¦ä¸€ä¸ªæ™ºèƒ½ä½“è´Ÿè´£è¯„ä¼°å’Œåâ€Œé¦ˆï¼ŒäºŒè€…å¾ªç¯è¿­ä»£ä¼˜åŒ–è¾“å‡ºã€‚

ä¸¾ä¸ªä¾‹å­ï¼Œåœ¨æœºâ å™¨ç¿»è¯‘åœºæ™¯ä¸­ï¼Œå…ˆç”±ç¿»è¯‘æ™ºèƒ½ä½“â€Œè¾“å‡ºï¼Œå†ç”±è¯„å®¡æ™ºèƒ½ä½“ç»™å‡ºæ”¹è¿›å»ºè®®ï¼Œåå¤è¿­ä»£ç›´åˆ°è¾¾åˆ°æ»¡æ„â€çš„è´¨é‡ã€‚è¿™ç§æ¨¡å¼ç‰¹åˆ«é€‚åˆéœ€è¦å¤šâ€Œè½®æ‰“ç£¨å’Œè´¨é‡æå‡çš„ä»»åŠ¡ã€‚

### A2A åè®®

#### ä»€ä¹ˆæ˜¯ A2A åè®®ï¼Ÿ

A2Aï¼ˆAgent to Agentï¼‰ä¹Ÿæ˜¯æœ€è¿‘å¾ˆçƒ­é—¨çš„ä¸€ä¸ªæ¦‚å¿µï¼Œç®€å•æ¥è¯´ï¼Œ[A2A åè®®](https://google.github.io/A2A/) å°±æ˜¯ä¸º â€œæ™ºèƒ½ä½“ä¹‹é—´å¦‚ä½•ç›´æ¥äº¤æµå’Œåä½œâ€ åˆ¶å®šçš„ä¸€å¥—æ ‡å‡†ã€‚

A2A åè®®çš„æ ¸å¿ƒï¼Œæ˜¯è®©æ¯â ä¸ªæ™ºèƒ½ä½“éƒ½èƒ½åƒ â€œç½‘ç»œèŠ‚ç‚¹â€ ä¸€æ ·ï¼Œæ‹¥æœ‰è‡ªå·±çš„èº«ä»½â€Œã€èƒ½åŠ›æè¿°å’Œé€šä¿¡æ¥å£ã€‚å®ƒä¸ä»…è§„å®šäº†æ¶ˆæ¯çš„æ ¼å¼å’Œä¼ é€’æ–¹å¼ï¼Œè¿˜åŒ…æ‹¬äº†èº«ä»½è®¤è¯ã€èƒ½åŠ›å‘ç°ã€ä»»åŠ¡å§”æ‰˜ã€ç»“æœå›ä¼ â€ç­‰æœºåˆ¶ã€‚è¿™æ ·ä¸€æ¥ï¼Œæ™ºèƒ½ä½“ä¹‹é—´å°±å¯ä»¥åƒäººç±»å›¢é˜Ÿä¸€æ ·â€Œï¼Œäº’ç›¸æ‰“æ‹›å‘¼ã€è¯¢é—®å¯¹æ–¹èƒ½åšä»€ä¹ˆã€è¯·æ±‚ååŠ©ã€‚

å¯ä»¥æŠŠ A2A ç±»æ¯”ä¸ºæ™ºèƒ½ä½“ä¸–â ç•Œé‡Œçš„ HTTP åè®®ï¼ŒHTTP åè®®è®©å…¨çƒä¸åŒæœåŠ¡å™¨å’Œç”µè„‘ä¹‹â€Œé—´èƒ½å¤Ÿäº¤æ¢æ•°æ®ï¼ŒA2A åè®®åˆ™æ˜¯è®©ä¸åŒå‚å•†ã€ä¸åŒå¹³å°ã€ä¸åŒèƒ½åŠ›çš„æ™ºèƒ½ä½“èƒ½å¤Ÿåƒå›¢é˜Ÿæˆå‘˜ä¸€æ ·äº’ç›¸ç†è§£ã€åä½œå’Œåˆ†å·¥ã€‚å¦‚æœè¯´ Hâ€TTP åè®®è®©äº’è”ç½‘æˆä¸ºäº†ä¸€ä¸ªå¼€æ”¾ã€äº’è”çš„ä¸–ç•Œï¼Œé‚£ä¹ˆ A2Aâ€Œ åè®®åˆ™è®©æ™ºèƒ½ä½“ä¸–ç•Œå˜å¾—å¼€æ”¾ã€åä½œå’Œé«˜æ•ˆã€‚

![agent-2](assets/agent-2.jpg)

#### A2A åè®®çš„åº”ç”¨åœºæ™¯

A2A åè®®çš„åº”ç”¨éå¸¸å¹¿æ³›ï¼Œæ€»ç»“ä¸‹æ¥ 4 ä¸ªå­—å°±æ˜¯ **å¼€æ”¾äº’è”**ã€‚æ¯”å¦‚åœ¨è‡ªåŠ¨é©¾é©¶é¢†åŸŸï¼Œä¸åŒè½¦è¾†çš„æ™ºèƒ½ä½“å¯ä»¥å®æ—¶äº¤æ¢è·¯å†µä¿¡æ¯ï¼ŒååŒé¿éšœå’Œè§„åˆ’è·¯çº¿ï¼›åœ¨åˆ¶é€ è½¦é—´ï¼Œç”Ÿäº§çº¿ä¸Šçš„å„ç±»æœºå™¨äººæ™ºèƒ½ä½“å¯ä»¥æ ¹æ®ä»»åŠ¡åŠ¨æ€åˆ†å·¥ï¼Œäº’ç›¸è¡¥ä½ï¼›åœ¨é‡‘èé£æ§ã€æ™ºèƒ½å®¢æœç­‰åœºæ™¯ï¼Œä¸åŒçš„æ™ºèƒ½ä½“å¯ä»¥æ ¹æ®è‡ªèº«ä¸“é•¿åä½œå¤„ç†å¤æ‚ä¸šåŠ¡æµç¨‹ã€‚

æˆ‘ä»¬è¿˜å¯ä»¥å¤§èƒ†æƒ³è±¡â ï¼Œæœªæ¥å¼€å‘è€…å¯ä»¥åƒè°ƒç”¨äº‘æœåŠ¡ä¸€æ ·ï¼Œâ€ŒæŒ‰éœ€ç§Ÿç”¨æˆ–ç»„åˆä¸åŒçš„æ™ºèƒ½ä½“æœåŠ¡ï¼Œç”šè‡³å®ç°æ™ºèƒ½ä½“ä¹‹é—´çš„è‡ªåŠ¨äº¤æ˜“å’Œç»“ç®—ã€‚â€ç›®å‰å…¶å®å°±æœ‰å¾ˆå¤šæ™ºèƒ½ä½“å¹³å°ï¼Œåªä¸è¿‡â€Œæ™ºèƒ½ä½“ä¹‹é—´çš„è¿æ¥åä½œç”šå°‘ã€‚

#### å’Œ MCP åè®®çš„åŒºåˆ«

è™½ç„¶ A2â A å’Œ MCP éƒ½â€Œç®—æ˜¯åè®®ï¼ˆæˆ–è€…æ ‡å‡†ï¼‰ï¼Œä½†äºŒè€…å­˜åœ¨æœ¬è´¨ä¸Šâ€çš„åŒºåˆ«ã€‚

MCP åè®®æ˜¯ **æ™ºèƒ½ä½“å’Œå¤–éƒ¨å·¥å…·ä¹‹é—´çš„æ ‡å‡†**ï¼Œå®ƒè§„å®šäº†æ™ºèƒ½ä½“å¦‚ä½•å®‰å…¨ã€è§„èŒƒåœ°è°ƒç”¨å¤–éƒ¨çš„æ•°æ®åº“ã€æœç´¢å¼•æ“ã€ä»£ç æ‰§è¡Œç­‰å·¥å…·èµ„æºã€‚ä½ å¯ä»¥æŠŠ MCP ç†è§£ä¸º â€œæ™ºèƒ½ä½“ - å·¥å…·â€ çš„ HTTP åè®®ã€‚

è€Œ A2A åè®®åˆ™æ˜¯ **æ™ºèƒ½ä½“ä¹‹é—´çš„é€šä¿¡åè®®**ã€‚å®ƒæ›´åƒæ˜¯è®©ä¸åŒçš„ AI è§’è‰²ä¹‹é—´å¯ä»¥ç›´æ¥å¯¹è¯ã€åä½œå’Œåˆ†å·¥ã€‚

ä»å®‰å…¨è§’åº¦â çœ‹ï¼ŒMCP å’Œ Aâ€Œ2A å¤„ç†çš„æ˜¯ä¸åŒå±‚é¢çš„å®‰å…¨é—®é¢˜ï¼š

- MCP çš„å®‰å…¨å…³æ³¨ç‚¹ï¼šä¸»è¦é›†ä¸­åœ¨å•ä¸ªæ™ºèƒ½ä½“ä¸å·¥å…·ä¹‹é—´çš„å®‰å…¨äº¤äº’ï¼Œä¸»è¦é˜²èŒƒçš„æ˜¯å·¥å…·æ»¥ç”¨å’Œæç¤ºè¯æ³¨å…¥æ”»å‡»ã€‚
- A2A çš„å®‰å…¨å…³æ³¨ç‚¹ï¼šæ›´å…³æ³¨æ™ºèƒ½ä½“ç½‘ç»œä¸­çš„èº«ä»½è®¤è¯ã€æˆæƒå’Œä¿¡ä»»é“¾ã€‚A2A éœ€è¦è§£å†³ â€œæˆ‘æ€ä¹ˆçŸ¥é“æˆ‘åœ¨å’Œè°é€šä¿¡â€ã€â€œè¿™ä¸ªæ™ºèƒ½ä½“æœ‰æƒé™è¯·æ±‚è¿™é¡¹ä»»åŠ¡å—â€ã€â€œå¦‚ä½•é˜²æ­¢æ¶æ„æ™ºèƒ½ä½“çªƒå–æˆ–ç¯¡æ”¹ä»»åŠ¡æ•°æ®â€ ç­‰é—®é¢˜ã€‚ï¼ˆè¿™äº›é—®é¢˜ä¹Ÿæ˜¯ HTTP åè®®éœ€è¦è€ƒè™‘çš„ï¼‰

æ˜¾ç„¶ï¼ŒA2â A é¢ä¸´çš„å®‰å…¨æŒ‘æˆ˜â€Œæ›´åŠ å¤æ‚ï¼Œå› ä¸ºå®ƒå¤„ç†çš„æ˜¯è·¨ç½‘ç»œã€è·¨å¹³â€å°ã€å¤šæ–¹åä½œçš„åœºæ™¯â€Œã€‚

å¯¹äºä¸€ä¸ªæˆç†Ÿçš„â æ™ºèƒ½ä½“ç³»ç»Ÿï¼Œå¯èƒ½ä¼šåŒæ—¶è¿ç”¨â€Œ MCP å’Œ A2Aï¼ŒMCP è´Ÿè´£æŸä¸ªæ™ºèƒ½ä½“å†…éƒ¨è°ƒç”¨â€å·¥å…·å®Œæˆä»»åŠ¡ï¼ŒA2A è´Ÿè´£â€Œæ™ºèƒ½ä½“ä¹‹é—´ååŒå®Œæˆä»»åŠ¡ã€‚

![agent-3](assets/agent-3.jpg)