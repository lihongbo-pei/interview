# å·¥å…·è°ƒç”¨

## äºŒã€å·¥å…·è°ƒç”¨ä»‹ç»

### ä»€ä¹ˆæ˜¯å·¥å…·è°ƒç”¨ï¼Ÿ

å·¥å…·è°ƒç”¨ï¼ˆTool Callingï¼‰å¯ä»¥ç†è§£ä¸ºè®© AI å¤§æ¨¡å‹ **å€Ÿç”¨å¤–éƒ¨å·¥å…·** æ¥å®Œæˆå®ƒè‡ªå·±åšä¸åˆ°çš„äº‹æƒ…ã€‚

è·Ÿäººç±»ä¸€æ ·â ï¼Œå¦‚æœåªå‡­æ‰‹è„šå®Œæˆâ€Œä¸äº†å·¥ä½œï¼Œé‚£ä¹ˆå°±å¯ä»¥åˆ©ç”¨å·¥å…·ç®±æ¥å®Œæˆâ€ã€‚

å·¥å…·å¯ä»¥æ˜¯â ä»»ä½•ä¸œè¥¿ï¼Œæ¯”å¦‚ç½‘é¡µâ€Œæœç´¢ã€å¯¹å¤–éƒ¨ API çš„è°ƒç”¨ã€è®¿é—®å¤–â€éƒ¨æ•°æ®ã€æˆ–æ‰§è¡Œç‰¹å®šâ€Œçš„ä»£ç ç­‰ã€‚

æ¯”å¦‚ç”¨æˆ·æâ é—® â€œå¸®æˆ‘æŸ¥è¯¢ä¸Šæµ·æœ€â€Œæ–°çš„å¤©æ°”â€ï¼ŒAI æœ¬èº«å¹¶æ²¡æœ‰è¿™äº›çŸ¥è¯†ï¼Œå®ƒâ€å°±å¯ä»¥è°ƒç”¨ â€œæŸ¥è¯¢å¤©â€Œæ°”å·¥å…·â€ï¼Œæ¥å®Œæˆä»»åŠ¡ã€‚

ç›®å‰å·¥å…·è°ƒâ ç”¨æŠ€æœ¯å‘å±•çš„å·²ç»æ¯”è¾ƒâ€Œæˆç†Ÿäº†ï¼Œå‡ ä¹æ‰€æœ‰ä¸»æµçš„ã€æ–°å‡ºçš„ AI å¤§â€æ¨¡å‹å’Œ AI åº”ç”¨å¼€â€Œå‘å¹³å°éƒ½æ”¯æŒå·¥å…·è°ƒç”¨ã€‚

### å·¥å…·è°ƒç”¨çš„å·¥ä½œåŸç†

å…¶å®ï¼Œå·¥å…·è°ƒç”¨çš„å·¥ä½œåŸç†éå¸¸ç®€å•ï¼Œ**å¹¶ä¸æ˜¯ AI æœåŠ¡å™¨è‡ªå·±è°ƒç”¨è¿™äº›å·¥å…·ã€ä¹Ÿä¸æ˜¯æŠŠå·¥å…·çš„ä»£ç å‘é€ç»™ AI æœåŠ¡å™¨è®©å®ƒæ‰§è¡Œ**ï¼Œå®ƒåªèƒ½æå‡ºè¦æ±‚ï¼Œè¡¨ç¤º â€œæˆ‘éœ€è¦æ‰§è¡Œ XX å·¥å…·å®Œæˆä»»åŠ¡â€ã€‚è€ŒçœŸæ­£æ‰§è¡Œå·¥å…·çš„æ˜¯æˆ‘ä»¬è‡ªå·±çš„åº”ç”¨ç¨‹åºï¼Œæ‰§è¡Œåå†æŠŠç»“æœå‘Šè¯‰ AIï¼Œè®©å®ƒç»§ç»­å·¥ä½œã€‚

ä¸¾ä¸ªä¾‹å­ï¼Œâ å‡å¦‚ç”¨æˆ·æé—® â€œç¼–â€Œç¨‹å¯¼èˆªç½‘ç«™æœ‰å“ªäº›çƒ­é—¨æ–‡ç« ï¼Ÿâ€ï¼Œå°±éœ€è¦â€ç»å†ä¸‹åˆ—æµç¨‹ï¼š

1. ç”¨æˆ·æå‡ºé—®é¢˜ï¼š"ç¼–ç¨‹å¯¼èˆªç½‘ç«™æœ‰å“ªäº›çƒ­é—¨æ–‡ç« ï¼Ÿ"
2. ç¨‹åºå°†é—®é¢˜ä¼ é€’ç»™å¤§æ¨¡å‹
3. å¤§æ¨¡å‹åˆ†æé—®é¢˜ï¼Œåˆ¤æ–­éœ€è¦ä½¿ç”¨å·¥å…·ï¼ˆç½‘é¡µæŠ“å–å·¥å…·ï¼‰æ¥è·å–ä¿¡æ¯
4. å¤§æ¨¡å‹è¾“å‡ºå·¥å…·åç§°å’Œå‚æ•°ï¼ˆç½‘é¡µæŠ“å–å·¥å…·ï¼ŒURL å‚æ•°ä¸º codefather.cnï¼‰
5. ç¨‹åºæ¥æ”¶å·¥å…·è°ƒç”¨è¯·æ±‚ï¼Œæ‰§è¡Œç½‘é¡µæŠ“å–æ“ä½œ
6. å·¥å…·æ‰§è¡ŒæŠ“å–å¹¶è¿”å›æ–‡ç« æ•°æ®
7. ç¨‹åºå°†æŠ“å–ç»“æœä¼ å›ç»™å¤§æ¨¡å‹
8. å¤§æ¨¡å‹åˆ†æç½‘é¡µå†…å®¹ï¼Œç”Ÿæˆå…³äºç¼–ç¨‹å¯¼èˆªçƒ­é—¨æ–‡ç« çš„å›ç­”
9. ç¨‹åºå°†å¤§æ¨¡å‹çš„å›ç­”è¿”å›ç»™ç”¨æˆ·

![tool-1](assets/tool-1.jpg)

è™½ç„¶çœ‹èµ·æ¥æ˜¯ AI åœ¨è°ƒç”¨å·¥å…·ï¼Œä½†å®é™…ä¸Šæ•´ä¸ªè¿‡ç¨‹æ˜¯ **ç”±æˆ‘ä»¬çš„åº”ç”¨ç¨‹åºæ§åˆ¶çš„**ã€‚AI åªè´Ÿè´£å†³å®šä»€ä¹ˆæ—¶å€™éœ€è¦ç”¨å·¥å…·ï¼Œä»¥åŠéœ€è¦ä¼ é€’ä»€ä¹ˆå‚æ•°ï¼ŒçœŸæ­£æ‰§è¡Œå·¥å…·çš„æ˜¯æˆ‘ä»¬çš„ç¨‹åºã€‚

ä½ å¯èƒ½ä¼šå¥½â å¥‡ï¼Œä¸ºå•¥è¦è¿™ä¹ˆè®¾è®¡â€Œå‘¢ï¼Ÿè¿™æ ·ä¸æ˜¯è¦è®©ç¨‹åºè¯·æ±‚ AI å¤šæ¬¡â€ä¹ˆï¼Ÿä¸ºå•¥ä¸è®© AIâ€Œ æœåŠ¡å™¨ç›´æ¥è°ƒç”¨å·¥å…·ç¨‹åºï¼Ÿ

æœ‰è¿™ä¸ªæƒ³æ³•å¾ˆæ­£å¸¸ï¼Œä½†å¦‚æœè®©ä½ è‡ªå·±è®¾è®¡ä¸€ä¸ª AI å¤§æ¨¡å‹æœåŠ¡ï¼Œä½ å°±èƒ½ç†è§£äº†ã€‚å¾ˆå…³é”®çš„ä¸€ç‚¹æ˜¯ **å®‰å…¨æ€§**ï¼ŒAI æ¨¡å‹æ°¸è¿œæ— æ³•ç›´æ¥æ¥è§¦ä½ çš„ API æˆ–ç³»ç»Ÿèµ„æºï¼Œæ‰€æœ‰æ“ä½œéƒ½å¿…é¡»é€šè¿‡ä½ çš„ç¨‹åºæ¥æ‰§è¡Œï¼Œè¿™æ ·ä½ å¯ä»¥å®Œå…¨æ§åˆ¶ AI èƒ½åšä»€ä¹ˆã€ä¸èƒ½åšä»€ä¹ˆã€‚

ä¸¾ä¸ªä¾‹å­ï¼Œä½ æœ‰ä¸€ä¸ªçˆ†ç ´å·¥å…·â ï¼Œç”¨æˆ·åƒ AI æäº†éœ€æ±‚ â€ æˆ‘è¦æ‹†è¿™æ ‹æˆ¿å­ â€œï¼Œè™½ç„¶â€Œ AI è¡¨ç¤ºå¯ä»¥ç”¨çˆ†ç ´å·¥å…·ï¼Œä½†æ˜¯éœ€è¦ç»è¿‡ä½ çš„åŒæ„ï¼Œæ‰èƒ½æ‰§è¡Œçˆ†ç ´ã€‚åä¹‹ï¼Œå¦‚æœæŠŠçˆ†ç ´å·¥å…·æ¤å…¥ç»™ AIï¼ŒAâ€I è§‰å¾—è‡ªå·±èƒ½ç‚¸äº†ï¼Œå°±ç‚¸äº†ï¼Œä¸éœ€è¦å†é—®ä½ çš„æ„è§ã€‚è€Œâ€Œä¸”è¿™æ ·ä¹Ÿç»™ AI æœåŠ¡å™¨æœ¬èº«å¢åŠ äº†å‹åŠ›ã€‚

### å·¥å…·è°ƒç”¨å’ŒåŠŸèƒ½è°ƒç”¨

å¤§å®¶å¯èƒ½çœ‹åˆ°è¿‡ Fâ unction Callingï¼ˆåŠŸâ€Œèƒ½è°ƒç”¨ï¼‰è¿™ä¸ªæ¦‚å¿µï¼Œåˆ«æ‹…å¿ƒï¼Œå…¶å®å®ƒå’Œ Tool Callingï¼ˆå·¥å…·è°ƒâ€ç”¨ï¼‰å®Œå…¨æ˜¯åŒä¸€æ¦‚å¿µï¼åªæ˜¯ä¸åŒå¹³å°æˆ–â€Œæ¯ä¸ªäººä¹ æƒ¯çš„å«æ³•ä¸åŒè€Œå·²ã€‚

[Spring AI å·¥å…·è°ƒç”¨æ–‡æ¡£](https://docs.spring.io/spring-ai/reference/api/tools.html) çš„å¼€å¤´å°±è¯´æ˜äº†è¿™ä¸€ç‚¹ï¼š

é±¼çš®ä¸ªäººæ›´å–œâ æ¬¢ â€œå·¥å…·è°ƒç”¨â€ è¿™ä¸ªâ€Œè¯´æ³•ï¼Œå› ä¸º Function è¿™ä¸ªè¯æ›´åƒæ˜¯è®¡â€ç®—æœºè¡Œä¸šçš„æœ¯è¯­ï¼Œä¸å¦‚å·¥â€Œå…·æ›´å½¢è±¡æ˜“æ‡‚ã€æ›´å…·æ™®é€‚æ€§ã€‚

### å·¥å…·è°ƒç”¨çš„æŠ€æœ¯é€‰å‹

æˆ‘ä»¬å…ˆæ¥æ¢³ç†ä¸€ä¸‹å·¥å…·è°ƒç”¨çš„æµç¨‹ï¼š

1. å·¥å…·å®šä¹‰ï¼šç¨‹åºå‘Šè¯‰ AI â€œä½ å¯ä»¥ä½¿ç”¨è¿™äº›å·¥å…·â€ï¼Œå¹¶æè¿°æ¯ä¸ªå·¥å…·çš„åŠŸèƒ½å’Œæ‰€éœ€å‚æ•°
2. å·¥å…·é€‰æ‹©ï¼šAI åœ¨å¯¹è¯ä¸­åˆ¤æ–­éœ€è¦ä½¿ç”¨æŸä¸ªå·¥å…·ï¼Œå¹¶å‡†å¤‡å¥½ç›¸åº”çš„å‚æ•°
3. è¿”å›æ„å›¾ï¼šAI è¿”å› â€œæˆ‘æƒ³ç”¨ XX å·¥å…·ï¼Œå‚æ•°æ˜¯ XXXâ€ çš„ä¿¡æ¯
4. å·¥å…·æ‰§è¡Œï¼šæˆ‘ä»¬çš„ç¨‹åºæ¥æ”¶è¯·æ±‚ï¼Œæ‰§è¡Œç›¸åº”çš„å·¥å…·æ“ä½œ
5. ç»“æœè¿”å›ï¼šç¨‹åºå°†å·¥å…·æ‰§è¡Œçš„ç»“æœå‘å›ç»™ AI
6. ç»§ç»­å¯¹è¯ï¼šAI æ ¹æ®å·¥å…·è¿”å›çš„ç»“æœï¼Œç”Ÿæˆæœ€ç»ˆå›ç­”ç»™ç”¨æˆ·

é€šè¿‡ä¸Šè¿°æµç¨‹ï¼Œæˆ‘ä»¬ä¼šå‘ç°ï¼Œâ ç¨‹åºéœ€è¦å’Œ AI å¤šæ¬¡è¿›è¡Œäº¤äº’ã€è¿˜è¦èƒ½å¤Ÿæ‰§è¡Œå¯¹åº”çš„â€Œå·¥å…·ï¼Œæ€ä¹ˆå®ç°è¿™äº›å‘¢ï¼Ÿæˆ‘ä»¬å½“ç„¶å¯ä»¥è‡ªä¸»å¼€å‘ï¼Œä¸è¿‡è¿˜æ˜¯æ›´æ¨èä½¿ç”¨ Spring AIã€LangChaiâ€n ç­‰å¼€å‘æ¡†æ¶ã€‚æ­¤å¤–ï¼Œæœ‰äº› AI å¤§æ¨¡å‹æœåŠ¡å•†ä¹Ÿæâ€Œä¾›äº†å¯¹åº”çš„ SDKï¼Œéƒ½èƒ½å¤Ÿç®€åŒ–ä»£ç ç¼–å†™ã€‚

æœ¬æ•™ç¨‹åç»­â éƒ¨åˆ†å°†ä»¥ Spriâ€Œng AI ä¸ºä¾‹ï¼Œå¸¦å¤§å®¶å®æˆ˜å·¥å…·è°ƒâ€ç”¨å¼€å‘ã€‚

ğŸ’¡ éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œä¸æ˜¯æ‰€æœ‰å¤§æ¨¡å‹éƒ½æ”¯æŒå·¥å…·è°ƒç”¨ã€‚æœ‰äº›åŸºç¡€æ¨¡å‹æˆ–æ—©æœŸç‰ˆæœ¬å¯èƒ½ä¸æ”¯æŒè¿™ä¸ªèƒ½åŠ›ã€‚å¯ä»¥åœ¨ [Spring AI å®˜æ–¹æ–‡æ¡£](https://docs.spring.io/spring-ai/reference/api/chat/comparison.html) ä¸­æŸ¥çœ‹å„æ¨¡å‹æ”¯æŒæƒ…å†µã€‚

## ä¸‰ã€Spring AI å·¥å…·å¼€å‘

é¦–å…ˆæˆ‘ä»¬é€šè¿‡ [Spring AI å®˜æ–¹](https://docs.spring.io/spring-ai/reference/api/tools.html) æä¾›çš„å›¾ç‰‡æ¥ç†è§£ Spring AI åœ¨å®ç°å·¥å…·è°ƒç”¨æ—¶éƒ½å¸®æˆ‘ä»¬åšäº†å“ªäº›äº‹æƒ…ï¼Ÿ

1. å·¥å…·å®šä¹‰ä¸æ³¨å†Œï¼šSpring AI å¯ä»¥é€šè¿‡ç®€æ´çš„æ³¨è§£è‡ªåŠ¨ç”Ÿæˆå·¥å…·å®šä¹‰å’Œ JSON Schemaï¼Œè®© Java æ–¹æ³•è½»æ¾è½¬å˜ä¸º AI å¯è°ƒç”¨çš„å·¥å…·ã€‚
2. å·¥å…·è°ƒç”¨è¯·æ±‚ï¼šSpring AI è‡ªåŠ¨å¤„ç†ä¸ AI æ¨¡å‹çš„é€šä¿¡å¹¶è§£æå·¥å…·è°ƒç”¨è¯·æ±‚ï¼Œå¹¶ä¸”æ”¯æŒå¤šä¸ªå·¥å…·é“¾å¼è°ƒç”¨ã€‚
3. å·¥å…·æ‰§è¡Œï¼šSpring AI æä¾›ç»Ÿä¸€çš„å·¥å…·ç®¡ç†æ¥å£ï¼Œè‡ªåŠ¨æ ¹æ® AI è¿”å›çš„å·¥å…·è°ƒç”¨è¯·æ±‚æ‰¾åˆ°å¯¹åº”çš„å·¥å…·å¹¶è§£æå‚æ•°è¿›è¡Œè°ƒç”¨ï¼Œè®©å¼€å‘è€…ä¸“æ³¨äºä¸šåŠ¡é€»è¾‘å®ç°ã€‚
4. å¤„ç†å·¥å…·ç»“æœï¼šSpring AI å†…ç½®ç»“æœè½¬æ¢å’Œå¼‚å¸¸å¤„ç†æœºåˆ¶ï¼Œæ”¯æŒå„ç§å¤æ‚ Java å¯¹è±¡ä½œä¸ºè¿”å›å€¼å¹¶ä¼˜é›…å¤„ç†é”™è¯¯æƒ…å†µã€‚
5. è¿”å›ç»“æœç»™æ¨¡å‹ï¼šSpring AI å°è£…å“åº”ç»“æœå¹¶ç®¡ç†ä¸Šä¸‹æ–‡ï¼Œç¡®ä¿å·¥å…·æ‰§è¡Œç»“æœæ­£ç¡®ä¼ é€’ç»™æ¨¡å‹æˆ–ç›´æ¥è¿”å›ç»™ç”¨æˆ·ã€‚
6. ç”Ÿæˆæœ€ç»ˆå“åº”ï¼šSpring AI è‡ªåŠ¨æ•´åˆå·¥å…·è°ƒç”¨ç»“æœåˆ°å¯¹è¯ä¸Šä¸‹æ–‡ï¼Œæ”¯æŒå¤šè½®å¤æ‚äº¤äº’ï¼Œç¡®ä¿ AI å›å¤çš„è¿è´¯æ€§å’Œå‡†ç¡®æ€§ã€‚

ä¸‹é¢æ˜¯ä¸€ä¸ªè¾ƒæ—©ç‰ˆæœ¬çš„æµç¨‹å›¾ï¼Œä¹Ÿèƒ½å¸®åŠ©æˆ‘ä»¬ç†è§£è¿™ä¸ªè¿‡ç¨‹ï¼š

### å®šä¹‰å·¥å…·

#### å·¥å…·å®šä¹‰æ¨¡å¼

åœ¨ Sprâ ing AI ä¸­ï¼Œå®šâ€Œä¹‰å·¥å…·ä¸»è¦æœ‰ä¸¤ç§æ¨¡å¼ï¼šåŸºäº Methodâ€s æ–¹æ³•æˆ–è€… Funâ€Œctions å‡½æ•°å¼ç¼–ç¨‹ã€‚

è®°ç»“è®ºå°±è¡Œäº†ï¼Œæˆ‘ä»¬åªç”¨å­¦ä¹  **åŸºäº Methods æ–¹æ³•** æ¥å®šä¹‰å·¥å…·ï¼Œå¦å¤–ä¸€ç§äº†è§£å³å¯ã€‚åŸå› æ˜¯ Methods æ–¹å¼æ›´å®¹æ˜“ç¼–å†™ã€æ›´å®¹æ˜“ç†è§£ã€æ”¯æŒçš„å‚æ•°å’Œè¿”å›ç±»å‹æ›´å¤šã€‚

äºŒè€…çš„è¯¦ç»†å¯¹æ¯”ï¼š

| ç‰¹æ€§           | Methods æ–¹å¼                                 | Functions æ–¹å¼                        |
| -------------- | -------------------------------------------- | ------------------------------------- |
| å®šä¹‰æ–¹å¼       | ä½¿ç”¨ `@Tool` å’Œ `@ToolParam` æ³¨è§£æ ‡è®°ç±»æ–¹æ³•  | ä½¿ç”¨å‡½æ•°å¼æ¥å£å¹¶é€šè¿‡ Spring Bean å®šä¹‰ |
| è¯­æ³•å¤æ‚åº¦     | ç®€å•ï¼Œç›´è§‚                                   | è¾ƒå¤æ‚ï¼Œéœ€è¦å®šä¹‰è¯·æ±‚ /â å“åº”å¯¹è±¡        |
| æ”¯æŒçš„å‚æ•°ç±»å‹ | å¤§å¤šæ•° Java ç±»å‹ï¼ŒåŒ…æ‹¬åŸºæœ¬ç±»å‹ã€POJOã€é›†åˆç­‰ | ä¸æ”¯æŒåŸºæœ¬ç±»å‹ã€Oâ€Œptionalã€é›†åˆç±»å‹    |
| æ”¯æŒçš„è¿”å›ç±»å‹ | å‡ ä¹æ‰€æœ‰å¯åºåˆ—åŒ–ç±»å‹ï¼ŒåŒ…æ‹¬ void              | ä¸æ”¯æŒåŸºæœ¬ç±»å‹ã€Optionalã€é›†åˆç±»å‹ç­‰  |
| ä½¿ç”¨åœºæ™¯       | é€‚åˆå¤§å¤šæ•°æ–°é¡¹ç›®å¼€å‘                         | é€‚åˆä¸ç°æœ‰å‡½æ•°å¼ API é›†æˆ             |
| æ³¨å†Œæ–¹å¼       | â€æ”¯æŒæŒ‰éœ€æ³¨å†Œå’Œå…¨å±€æ³¨å†Œ                       | é€šå¸¸åœ¨é…ç½®ç±»ä¸­é¢„å…ˆå®šä¹‰                |
| ç±»å‹è½¬æ¢       | è‡ªåŠ¨å¤„ç†                                     | éœ€è¦æ›´å¤šæ‰‹åŠ¨é…ç½®                      |
| æ–‡æ¡£æ”¯æŒ â€Œ      | é€šè¿‡æ³¨è§£æä¾›æè¿°                             | é€šè¿‡ Bean æè¿°å’Œ JSON å±æ€§æ³¨è§£        |

ä¸¾ä¸ªä¾‹å­æ¥å¯¹æ¯”è¿™ä¸¤ç§å®šä¹‰æ¨¡å¼ï¼š

1ï¼‰Methods æ¨¡å¼ï¼šé€šè¿‡ `@Tool` æ³¨è§£å®šä¹‰å·¥å…·ï¼Œé€šè¿‡ `tools` æ–¹æ³•ç»‘å®šå·¥å…·

```java
class WeatherTools {
    @Tool(description = "Get current weather for a location")
    public String getWeather(@ToolParam(description = "The city name") String city) {
        return "Current weather in " + city + ": Sunny, 25Â°C";
    }
}


ChatClient.create(chatModel)
    .prompt("What's the weather in Beijing?")
    .tools(new WeatherTools())
    .call();
```

2ï¼‰Functions æ¨¡å¼ï¼šé€šè¿‡ `@Bean` æ³¨è§£å®šä¹‰å·¥å…·ï¼Œé€šè¿‡ `functions` æ–¹æ³•ç»‘å®šå·¥å…·

```java
@Configuration
public class ToolConfig {
    @Bean
    @Description("Get current weather for a location")
    public Function<WeatherRequest, WeatherResponse> weatherFunction() {
        return request -> new WeatherResponse("Weather in " + request.getCity() + ": Sunny, 25Â°C");
    }
}


ChatClient.create(chatModel)
    .prompt("What's the weather in Beijing?")
    .functions("weatherFunction")
    .call();
```

æ˜¾ç„¶ Metâ hods æ¨¡å¼çš„å¼€å‘é‡æ›´â€Œå°‘ï¼ˆæˆ‘ä¼°è®¡å¾ˆå¤šåŒå­¦éƒ½æ²¡å†™è¿‡ Function å‡½â€æ•°å¼ç¼–ç¨‹ï¼‰ï¼Œæ›´æ¨èè¿™ç§æ–¹â€Œå¼ï¼Œæ‰€ä»¥ä¸‹é¢é‡ç‚¹è®²è§£è¿™ç§æ–¹å¼ã€‚

#### å®šä¹‰å·¥å…·

Spring AI æä¾›äº†ä¸¤ç§å®šä¹‰å·¥å…·çš„æ–¹æ³• â€”â€” **æ³¨è§£å¼** å’Œ **ç¼–ç¨‹å¼**ã€‚

1ï¼‰æ³¨è§£å¼ï¼šåªéœ€ä½¿ç”¨ `@Tool` æ³¨è§£æ ‡è®°æ™®é€š Java æ–¹æ³•ï¼Œå°±å¯ä»¥å®šä¹‰å·¥å…·äº†ï¼Œç®€å•ç›´è§‚ã€‚

æ¯ä¸ªå·¥å…·æœ€å¥½éƒ½æ·»åŠ è¯¦ç»†æ¸…æ™°çš„æè¿°ï¼Œå¸®åŠ© AI ç†è§£ä½•æ—¶åº”è¯¥è°ƒç”¨è¿™ä¸ªå·¥å…·ã€‚å¯¹äºå·¥å…·æ–¹æ³•çš„å‚æ•°ï¼Œå¯ä»¥ä½¿ç”¨ `@ToolParam` æ³¨è§£æä¾›é¢å¤–çš„æè¿°ä¿¡æ¯å’Œæ˜¯å¦å¿…å¡«ã€‚

ç¤ºä¾‹ä»£ç ï¼š

```java
class WeatherTools {
    @Tool(description = "è·å–æŒ‡å®šåŸå¸‚çš„å½“å‰å¤©æ°”æƒ…å†µ")
    String getWeather(@ToolParam(description = "åŸå¸‚åç§°") String city) {
        
        return "åŒ—äº¬ä»Šå¤©æ™´æœ—ï¼Œæ°”æ¸©25Â°C";
    }
}
```

2ï¼‰ç¼–ç¨‹å¼â ï¼šå¦‚æœæƒ³åœ¨è¿è¡Œæ—¶åŠ¨â€Œæ€åˆ›å»ºå·¥å…·ï¼Œå¯ä»¥é€‰æ‹©ç¼–ç¨‹å¼æ¥å®šä¹‰å·¥å…·ï¼Œâ€æ›´çµæ´»ã€‚

å…ˆå®šä¹‰å·¥å…·ç±»ï¼š

```java
class WeatherTools {
    String getWeather(String city) {
        
        return "åŒ—äº¬ä»Šå¤©æ™´æœ—ï¼Œæ°”æ¸©25Â°C";
    }
}
```

ç„¶åå°†å·¥å…·ç±»â è½¬æ¢ä¸º ToolCallâ€Œback å·¥å…·å®šä¹‰ç±»ï¼Œä¹‹åå°±å¯ä»¥æŠŠè¿™ä¸ªç±»ç»‘å®šç»™ â€ChatClientï¼Œä»â€Œè€Œè®© AI ä½¿ç”¨å·¥å…·äº†ã€‚

```java
Method method = ReflectionUtils.findMethod(WeatherTools.class, "getWeather", String.class);
ToolCallback toolCallback = MethodToolCallback.builder()
    .toolDefinition(ToolDefinition.builder(method)
            .description("è·å–æŒ‡å®šåŸå¸‚çš„å½“å‰å¤©æ°”æƒ…å†µ")
            .build())
    .toolMethod(method)
    .toolObject(new WeatherTools())
    .build();
```

å…¶å®ä½ ä¼šå‘â ç°ï¼Œç¼–ç¨‹å¼å°±æ˜¯æŠŠæ³¨â€Œè§£å¼çš„é‚£äº›å‚æ•°ï¼Œæ”¹æˆé€šè¿‡è°ƒç”¨æ–¹æ³•æ¥è®¾ç½®â€äº†è€Œå·²ã€‚

åœ¨å®šä¹‰å·¥å…·æ—¶ï¼Œéœ€è¦æ³¨â æ„æ–¹æ³•å‚æ•°å’Œè¿”å›å€¼ç±»å‹çš„é€‰æ‹©ã€‚Sprinâ€Œg AI æ”¯æŒå¤§å¤šæ•°å¸¸è§çš„ Java ç±»å‹ä½œä¸ºå‚æ•°å’Œè¿”å›å€¼ï¼ŒåŒ…æ‹¬åŸºæœ¬ç±»å‹ã€å¤æ‚å¯¹è±¡ã€â€é›†åˆç­‰ã€‚è€Œä¸”è¿”å›å€¼éœ€è¦æ˜¯å¯åºåˆ—åŒ–çš„ï¼Œâ€Œå› ä¸ºå®ƒå°†è¢«å‘é€ç»™ AI å¤§æ¨¡å‹ã€‚

ä»¥ä¸‹ç±»å‹ç›®å‰ä¸æ”¯æŒä½œä¸ºå·¥å…·æ–¹æ³•çš„å‚æ•°æˆ–è¿”å›ç±»å‹ï¼š

- Optional
- å¼‚æ­¥ç±»å‹ï¼ˆå¦‚ CompletableFuture, Futureï¼‰
- å“åº”å¼ç±»å‹ï¼ˆå¦‚ Flow, Mono, Fluxï¼‰
- å‡½æ•°å¼ç±»å‹ï¼ˆå¦‚ Function, Supplier, Consumerï¼‰

### ä½¿ç”¨å·¥å…·

å®šä¹‰å¥½å·¥å…·åâ ï¼ŒSpring AI â€Œæä¾›äº†å¤šç§çµæ´»çš„æ–¹å¼å°†å·¥å…·æä¾›ç»™ ChatCâ€lientï¼Œè®© AI â€Œèƒ½å¤Ÿåœ¨éœ€è¦æ—¶è°ƒç”¨è¿™äº›å·¥å…·ã€‚

1ï¼‰æŒ‰éœ€ä½¿ç”¨ï¼šè¿™æ˜¯æœ€ç®€å•çš„æ–¹å¼ï¼Œç›´æ¥åœ¨æ„å»º ChatClient è¯·æ±‚æ—¶é€šè¿‡ `tools()` æ–¹æ³•é™„åŠ å·¥å…·ã€‚è¿™ç§æ–¹å¼é€‚åˆåªåœ¨ç‰¹å®šå¯¹è¯ä¸­ä½¿ç”¨æŸäº›å·¥å…·çš„åœºæ™¯ã€‚

```java
String response = ChatClient.create(chatModel)
    .prompt("åŒ—äº¬ä»Šå¤©å¤©æ°”æ€ä¹ˆæ ·ï¼Ÿ")
    .tools(new WeatherTools())  
    .call()
    .content();
```

2ï¼‰å…¨å±€ä½¿ç”¨ï¼šå¦‚â æœæŸäº›å·¥å…·éœ€è¦åœ¨æ‰€æœ‰å¯¹è¯ä¸­éƒ½å¯ç”¨â€Œï¼Œå¯ä»¥åœ¨æ„å»º ChatClient æ—¶æ³¨å†Œé»˜è®¤å·¥å…·ã€‚è¿™æ ·ï¼Œè¿™äº›å·¥â€å…·å°†å¯¹ä»åŒä¸€ä¸ª ChatClieâ€Œnt å‘èµ·çš„æ‰€æœ‰å¯¹è¯å¯ç”¨ã€‚

```
ChatClient chatClient = ChatClient.builder(chatModel)
    .defaultTools(new WeatherTools(), new TimeTools())  
    .build();
```

3ï¼‰æ›´åº•å±‚çš„ä½¿ç”¨æ–¹â å¼ï¼šé™¤äº†ç»™ ChatClient â€Œç»‘å®šå·¥å…·å¤–ï¼Œä¹Ÿå¯ä»¥ç»™æ›´åº•å±‚çš„ ChatModel ç»‘å®šå·¥å…·ï¼ˆæ¯•ç«Ÿå·¥å…·â€è°ƒç”¨æ˜¯ AI å¤§æ¨¡å‹æ”¯æŒçš„èƒ½åŠ›ï¼‰ï¼Œâ€Œé€‚åˆéœ€è¦æ›´ç²¾ç»†æ§åˆ¶çš„åœºæ™¯ã€‚

```
ToolCallback[] weatherTools = ToolCallbacks.from(new WeatherTools());

ChatOptions chatOptions = ToolCallingChatOptions.builder()
    .toolCallbacks(weatherTools)
    .build();

Prompt prompt = new Prompt("åŒ—äº¬ä»Šå¤©å¤©æ°”æ€ä¹ˆæ ·ï¼Ÿ", chatOptions);
chatModel.call(prompt);
```

4ï¼‰åŠ¨æ€è§£æï¼šä¸€èˆ¬æƒ…å†µä¸‹ï¼Œä½¿ç”¨å‰é¢ 3 ç§æ–¹å¼å³å¯ã€‚å¯¹äºæ›´å¤æ‚çš„åº”ç”¨ï¼ŒSpring AI è¿˜æ”¯æŒé€šè¿‡ `ToolCallbackResolver` åœ¨è¿è¡Œæ—¶åŠ¨æ€è§£æå·¥å…·ã€‚è¿™ç§æ–¹å¼ç‰¹åˆ«é€‚åˆå·¥å…·éœ€è¦æ ¹æ®ä¸Šä¸‹æ–‡åŠ¨æ€ç¡®å®šçš„åœºæ™¯ï¼Œæ¯”å¦‚ä»æ•°æ®åº“ä¸­æ ¹æ®å·¥å…·åæœç´¢è¦è°ƒç”¨çš„å·¥å…·ã€‚åœ¨æœ¬èŠ‚çš„å·¥å…·è¿›é˜¶çŸ¥è¯†ä¸­ä¼šè®²åˆ°ï¼Œå…ˆäº†è§£åˆ°æœ‰è¿™ç§æ–¹å¼å³å¯ã€‚

æ€»ç»“ä¸€ä¸‹ï¼Œåœ¨ä½¿ç”¨å·¥å…·æ—¶ï¼ŒSpring AI ä¼šè‡ªåŠ¨å¤„ç†å·¥å…·è°ƒç”¨çš„å…¨è¿‡ç¨‹ï¼šä» AI æ¨¡å‹å†³å®šè°ƒç”¨å·¥å…· => åˆ°æ‰§è¡Œå·¥å…·æ–¹æ³• => å†åˆ°å°†ç»“æœè¿”å›ç»™æ¨¡å‹ => æœ€åæ¨¡å‹åŸºäºå·¥å…·ç»“æœç”Ÿæˆæœ€ç»ˆå›ç­”ã€‚è¿™æ•´ä¸ªè¿‡ç¨‹å¯¹å¼€å‘è€…æ¥è¯´æ˜¯é€æ˜çš„ï¼Œæˆ‘ä»¬åªéœ€ä¸“æ³¨äº **å®ç°å·¥å…·** çš„ä¸šåŠ¡é€»è¾‘å³å¯ã€‚

é‚£ä¹ˆï¼Œæ€ä¹ˆå®ç°å·¥å…·å‘¢ï¼Ÿ

### å·¥å…·ç”Ÿæ€

é¦–å…ˆï¼Œå·¥å…·çš„æœ¬è´¨å°±æ˜¯ä¸€ç§æ’ä»¶ã€‚èƒ½ä¸è‡ªå·±å†™çš„æ’ä»¶ï¼Œå°±å°½é‡ä¸è¦è‡ªå·±å†™ã€‚æˆ‘ä»¬å¯ä»¥ç›´æ¥åœ¨ç½‘ä¸Šæ‰¾ä¸€äº›ä¼˜ç§€çš„å·¥å…·å®ç°ï¼Œæ¯”å¦‚ [Spring AI Alibaba å®˜æ–¹æ–‡æ¡£](https://java2ai.com/docs/1.0.0-M6.1/integrations/tools/) ä¸­æåˆ°äº†ç¤¾åŒºæ’ä»¶ã€‚

è™½ç„¶æ–‡æ¡£é‡Œåªæåˆ°äº†å±ˆæŒ‡å¯æ•°çš„æ’ä»¶æ•°ï¼Œä½†æˆ‘ä»¬å¯ä»¥é¡ºè—¤æ‘¸ç“œï¼Œåœ¨ GitHub ç¤¾åŒºæ‰¾åˆ°å®˜æ–¹æä¾›çš„æ›´å¤š [å·¥å…·æºç ](https://github.com/alibaba/spring-ai-alibaba/tree/main/community/tool-calls)ï¼ŒåŒ…å«å¤§é‡æœ‰ç”¨çš„å·¥å…·ï¼æ¯”å¦‚ç¿»è¯‘å·¥å…·ã€ç½‘é¡µæœç´¢å·¥å…·ã€çˆ¬è™«å·¥å…·ã€åœ°å›¾å·¥å…·ç­‰ï¼š

ğŸ’¡ è¿™ç§æœâ é›†èµ„æºçš„èƒ½åŠ›ï¼Œå¸Œæœ›å¤§å®¶ä¹Ÿâ€Œèƒ½å¤ŸæŒæ¡ï¼Œå°¤å…¶æ˜¯å­¦æ–°æŠ€æœ¯çš„æ—¶å€™ï¼Œå³ä½¿å®˜æ–¹æ–‡æ¡£å†™çš„â€ä¸å¤Ÿæ¸…æ™°å®Œå–„ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥â€Œä»å¼€æºç¤¾åŒºä¸­è·å–åˆ°ä¸€æ‰‹ä¿¡æ¯ã€‚

## å››ã€ä¸»æµå·¥å…·å¼€å‘

å¦‚æœç¤¾åŒºä¸­æ²¡æ‰¾åˆ°åˆâ é€‚çš„å·¥å…·ï¼Œæˆ‘ä»¬å°±è¦è‡ªä¸»å¼€å‘ã€‚éœ€è¦æ³¨â€Œæ„çš„æ˜¯ï¼ŒAI è‡ªèº«èƒ½å¤Ÿå®ç°çš„åŠŸèƒ½é€šå¸¸æ²¡å¿…è¦å®šä¹‰ä¸ºé¢å¤–çš„å·¥å…·ï¼Œå› ä¸ºè¿™ä¼šâ€å¢åŠ ä¸€æ¬¡é¢å¤–çš„äº¤äº’ï¼Œæˆ‘ä»¬åº”è¯¥å°†å·¥å…·â€Œç”¨äº AI æ— æ³•ç›´æ¥å®Œæˆçš„ä»»åŠ¡ã€‚

ä¸‹é¢æˆ‘ä»¬ä¾æ¬¡æ¥å®ç°éœ€æ±‚åˆ†æä¸­æåˆ°çš„ 6 å¤§å·¥å…·ï¼Œå¼€å‘è¿‡ç¨‹ä¸­æˆ‘ä»¬è¦ **æ ¼å¤–æ³¨æ„å·¥å…·æè¿°çš„å®šä¹‰**ï¼Œå› ä¸ºå®ƒä¼šå½±å“ AI å†³å®šæ˜¯å¦ä½¿ç”¨å·¥å…·ã€‚

å…ˆåœ¨é¡¹ç›®æ ¹åŒ…ä¸‹æ–°å»º `tools` åŒ…ï¼Œå°†æ‰€æœ‰å·¥å…·ç±»æ”¾åœ¨è¯¥åŒ…ä¸‹ï¼›å¹¶ä¸”å·¥å…·çš„è¿”å›å€¼å°½é‡ä½¿ç”¨ String ç±»å‹ï¼Œè®©ç»“æœçš„å«ä¹‰æ›´åŠ æ˜ç¡®ã€‚

### æ–‡ä»¶æ“ä½œ

æ–‡ä»¶æ“ä½œå·¥å…·ä¸»è¦æä¾› 2 å¤§åŠŸèƒ½ï¼šä¿å­˜æ–‡ä»¶ã€è¯»å–æ–‡ä»¶ã€‚

ç”±äºä¼šå½±å“ç³»ç»Ÿèµ„æºï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦å°†æ–‡ä»¶ç»Ÿä¸€å­˜æ”¾åˆ°ä¸€ä¸ªéš”ç¦»çš„ç›®å½•è¿›è¡Œå­˜å‚¨ï¼Œåœ¨ `constant` åŒ…ä¸‹æ–°å»ºæ–‡ä»¶å¸¸é‡ç±»ï¼Œçº¦å®šæ–‡ä»¶ä¿å­˜ç›®å½•ä¸ºé¡¹ç›®æ ¹ç›®å½•ä¸‹çš„ `/tmp` ç›®å½•ä¸­ã€‚

```java
public interface FileConstant {

    
    String FILE_SAVE_DIR = System.getProperty("user.dir") + "/tmp";
}
```

å»ºè®®åŒæ—¶å°†è¿™ä¸ªç›®å½•æ·»åŠ åˆ° `.gitignore` æ–‡ä»¶ä¸­ï¼Œé¿å…æäº¤éšç§ä¿¡æ¯ã€‚

ç¼–å†™æ–‡ä»¶æ“ä½œå·¥å…·ç±»ï¼Œé€šè¿‡æ³¨è§£å¼å®šä¹‰å·¥å…·ï¼Œä»£ç å¦‚ä¸‹ï¼š

```
public class FileOperationTool {

    private final String FILE_DIR = FileConstant.FILE_SAVE_DIR + "/file";

    @Tool(description = "Read content from a file")
    public String readFile(@ToolParam(description = "Name of the file to read") String fileName) {
        String filePath = FILE_DIR + "/" + fileName;
        try {
            return FileUtil.readUtf8String(filePath);
        } catch (Exception e) {
            return "Error reading file: " + e.getMessage();
        }
    }

    @Tool(description = "Write content to a file")
    public String writeFile(
        @ToolParam(description = "Name of the file to write") String fileName,
        @ToolParam(description = "Content to write to the file") String content) {
        String filePath = FILE_DIR + "/" + fileName;
        try {
            
            FileUtil.mkdir(FILE_DIR);
            FileUtil.writeUtf8String(content, filePath);
            return "File written successfully to: " + filePath;
        } catch (Exception e) {
            return "Error writing to file: " + e.getMessage();
        }
    }
}
```

ç¼–å†™å•å…ƒæµ‹è¯•éªŒè¯å·¥å…·åŠŸèƒ½ï¼š

```
@SpringBootTest
public class FileOperationToolTest {

    @Test
    public void testReadFile() {
        FileOperationTool tool = new FileOperationTool();
        String fileName = "ç¼–ç¨‹å¯¼èˆª.txt";
        String result = tool.readFile(fileName);
        assertNotNull(result);
    }

    @Test
    public void testWriteFile() {
        FileOperationTool tool = new FileOperationTool();
        String fileName = "ç¼–ç¨‹å¯¼èˆª.txt";
        String content = "https://www.codefather.cn ç¨‹åºå‘˜ç¼–ç¨‹å­¦ä¹ äº¤æµç¤¾åŒº";
        String result = tool.writeFile(fileName, content);
        assertNotNull(result);
    }
}
```

### è”ç½‘æœç´¢

è”ç½‘æœç´¢å·¥å…·çš„ä½œç”¨æ˜¯æ ¹æ®å…³é”®è¯æœç´¢ç½‘é¡µåˆ—è¡¨ã€‚

æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ä¸“ä¸šçš„ç½‘é¡µæœç´¢ APIï¼Œå¦‚ [Search API](https://www.searchapi.io/baidu) æ¥å®ç°ä»å¤šä¸ªç½‘ç«™æœç´¢å†…å®¹ï¼Œè¿™ç±»æœåŠ¡é€šå¸¸æŒ‰é‡è®¡è´¹ã€‚å½“ç„¶ä¹Ÿå¯ä»¥ç›´æ¥ä½¿ç”¨ Google æˆ– Bing çš„æœç´¢ APIï¼ˆç”šè‡³æ˜¯é€šè¿‡çˆ¬è™«å’Œç½‘é¡µè§£æä»æŸä¸ªæœç´¢å¼•æ“è·å–å†…å®¹ï¼‰ã€‚

1ï¼‰é˜…è¯» Search API çš„ [å®˜æ–¹æ–‡æ¡£](https://www.searchapi.io/baidu)ï¼Œé‡ç‚¹å…³æ³¨ API çš„è¯·æ±‚å‚æ•°å’Œè¿”å›ç»“æœã€‚ä» API è¿”å›çš„ç»“æœä¸­ï¼Œæˆ‘ä»¬åªéœ€è¦æå–å…³é”®éƒ¨åˆ†ï¼š

```
{
  "organic_results": [
    ...
    {
      "position": 1,
      "title": "ç¼–ç¨‹å¯¼èˆª - ç¨‹åºå‘˜ä¸€ç«™å¼ç¼–ç¨‹å­¦ä¹ äº¤æµç¤¾åŒº,åšæ‚¨ç¼–ç¨‹å­¦ä¹ è·¯...",
      "link": "https://codefather.cn/",
      "displayed_link": "codefather.cn/",
      "snippet": "å­¦ç¼–ç¨‹,å°±æ¥ç¼–ç¨‹å¯¼èˆª,ç¨‹åºå‘˜å…è´¹ç¼–ç¨‹å­¦ä¹ äº¤æµç¤¾åŒºã€‚Java,Python,å‰ç«¯,webç½‘ç«™å¼€å‘,Cè¯­è¨€,C++,Go,åç«¯,SQL,æ•°æ®åº“,PHPå…¥é—¨å­¦ä¹ ã€æŠ€èƒ½æå‡ã€æ±‚èŒé¢è¯•æ³•å®ã€‚æå‡ç¼–ç¨‹æ•ˆç‡ã€ä¼˜è´¨ITæŠ€æœ¯æ–‡ç« ã€æµ·...",
      "snippet_highlighted_words": [
        "ç¼–ç¨‹",
        "ç¼–ç¨‹å¯¼èˆª",
        "ç¨‹åºå‘˜"
      ],
      "thumbnail": "https://t8.baidu.com/it/u=661528516,2886240705&fm=217&app=126&size=f242,150&n=0&f=JPEG&fmt=auto?s=73B489634AD237E3660C19280200A063&sec=1744477200&t=b5d8762a6f5728d5f2fbc6bcf1774b20"
    },
    ...
  ]
}
```

2ï¼‰å¯ä»¥æŠŠâ æ¥å£æ–‡æ¡£å–‚ç»™ AIâ€Œï¼Œè®©å®ƒå¸®æˆ‘ä»¬ç”Ÿæˆå·¥å…·ä»£ç ï¼Œç½‘é¡µæœç´¢å·¥â€å…·ä»£ç å¦‚ä¸‹ï¼š

```
public class WebSearchTool {

    
    private static final String SEARCH_API_URL = "https://www.searchapi.io/api/v1/search";

    private final String apiKey;

    public WebSearchTool(String apiKey) {
        this.apiKey = apiKey;
    }

    @Tool(description = "Search for information from Baidu Search Engine")
    public String searchWeb(
            @ToolParam(description = "Search query keyword") String query) {
        Map<String, Object> paramMap = new HashMap<>();
        paramMap.put("q", query);
        paramMap.put("api_key", apiKey);
        paramMap.put("engine", "baidu");
        try {
            String response = HttpUtil.get(SEARCH_API_URL, paramMap);
            
            JSONObject jsonObject = JSONUtil.parseObj(response);
            
            JSONArray organicResults = jsonObject.getJSONArray("organic_results");
            List<Object> objects = organicResults.subList(0, 5);
            
            String result = objects.stream().map(obj -> {
                JSONObject tmpJSONObject = (JSONObject) obj;
                return tmpJSONObject.toString();
            }).collect(Collectors.joining(","));
            return result;
        } catch (Exception e) {
            return "Error searching Baidu: " + e.getMessage();
        }
    }
}
```

3ï¼‰æˆ‘ä»¬éœ€â è¦è·å– API Kâ€Œey æ¥è°ƒç”¨ç½‘é¡µæœç´¢ï¼Œæ³¨æ„ä¸è¦æ³„éœ²å“¦â€~

4ï¼‰åœ¨é…ç½®æ–‡ä»¶ä¸­æ·»åŠ  API Keyï¼š

```
search-api:
  api-key: ä½ çš„ API Key
```

5ï¼‰ç¼–å†™å•å…ƒâ æµ‹è¯•ä»£ç ï¼Œè¯»å–é…ç½®æ–‡ä»¶â€Œä¸­çš„å¯†é’¥æ¥åˆ›å»ºç½‘é¡µæœç´¢å·¥å…·ï¼šâ€‚â€‚â€‚â€‚â€‚â€‚â€‚â€‚â€â€‚â€‚â€‚â€‚â€‚â€‚â€‚â€‚â€‰â€‚â€‰â€Œâ€‚â€‚â€‚â€‚â€‚â€‚â€‰â€‚â€‰â€‰â€‚â€‰â€‰

```
@SpringBootTest
public class WebSearchToolTest {

    @Value("${search-api.api-key}")
    private String searchApiKey;

    @Test
    public void testSearchWeb() {
        WebSearchTool tool = new WebSearchTool(searchApiKey);
        String query = "ç¨‹åºå‘˜é±¼çš®ç¼–ç¨‹å¯¼èˆª codefather.cn";
        String result = tool.searchWeb(query);
        assertNotNull(result);
    }
}
```

è¿è¡Œæ•ˆæœå¦‚å›¾ï¼ŒæˆåŠŸæœç´¢åˆ°äº†ç½‘é¡µï¼š

åœ¨å®é™…åº”ç”¨â ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥è¿›ä¸€æ­¥â€Œè¿‡æ»¤ç»“æœï¼Œåªä¿ç•™ titleã€linâ€k å’Œ snippâ€Œet ç­‰å…³é”®ä¿¡æ¯å°±å¤Ÿäº†ã€‚

### ç½‘é¡µæŠ“å–

ç½‘é¡µæŠ“å–å·¥å…·çš„ä½œç”¨æ˜¯æ ¹æ®ç½‘å€è§£æåˆ°ç½‘é¡µçš„å†…å®¹ã€‚

1ï¼‰å¯ä»¥ä½¿â ç”¨ jsoup åº“â€Œå®ç°ç½‘é¡µå†…å®¹æŠ“å–å’Œè§£æï¼Œé¦–å…ˆç»™é¡¹ç›®æ·»â€åŠ ä¾èµ–ï¼š

```
<dependency>
    <groupId>org.jsoup</groupId>
    <artifactId>jsoup</artifactId>
    <version>1.19.1</version>
</dependency>
```

2ï¼‰ç¼–å†™ç½‘é¡µæŠ“å–å·¥å…·ç±»ï¼Œå‡ è¡Œä»£ç å°±æå®šäº†ï¼š

```
public class WebScrapingTool {

    @Tool(description = "Scrape the content of a web page")
    public String scrapeWebPage(@ToolParam(description = "URL of the web page to scrape") String url) {
        try {
            Document doc = Jsoup.connect(url).get();
            return doc.html();
        } catch (IOException e) {
            return "Error scraping web page: " + e.getMessage();
        }
    }
}
```

3ï¼‰ç¼–å†™å•å…ƒæµ‹è¯•ä»£ç ï¼š

```
@SpringBootTest
public class WebScrapingToolTest {

    @Test
    public void testScrapeWebPage() {
        WebScrapingTool tool = new WebScrapingTool();
        String url = "https://www.codefather.cn";
        String result = tool.scrapeWebPage(url);
        assertNotNull(result);
    }
}
```

æ‰§è¡Œæ•ˆæœå¦‚å›¾ï¼ŒæˆåŠŸæŠ“å–åˆ°äº†ç½‘é¡µå†…å®¹ï¼š

### ç»ˆç«¯æ“ä½œ

ç»ˆç«¯æ“ä½œå·¥â å…·çš„ä½œç”¨æ˜¯åœ¨ç»ˆç«¯æ‰§â€Œè¡Œå‘½ä»¤ï¼Œæ¯”å¦‚æ‰§è¡Œ python å‘½ä»¤æ¥è¿â€è¡Œè„šæœ¬ã€‚

1ï¼‰å¯ä»¥é€šè¿‡ â Java çš„ Procesâ€Œs API å®ç°ç»ˆç«¯å‘½ä»¤æ‰§è¡Œï¼Œæ³¨æ„ Windows â€å’Œå…¶ä»–æ“ä½œç³»ç»Ÿä¸‹çš„å®ç°ç•¥â€Œæœ‰åŒºåˆ«ï¼‰ã€‚å·¥å…·ç±»ä»£ç å¦‚ä¸‹ï¼š

```
public class TerminalOperationTool {

    @Tool(description = "Execute a command in the terminal")
    public String executeTerminalCommand(@ToolParam(description = "Command to execute in the terminal") String command) {
        StringBuilder output = new StringBuilder();
        try {
            Process process = Runtime.getRuntime().exec(command);
            try (BufferedReader reader = new BufferedReader(new InputStreamReader(process.getInputStream()))) {
                String line;
                while ((line = reader.readLine()) != null) {
                    output.append(line).append("\n");
                }
            }
            int exitCode = process.waitFor();
            if (exitCode != 0) {
                output.append("Command execution failed with exit code: ").append(exitCode);
            }
        } catch (IOException | InterruptedException e) {
            output.append("Error executing command: ").append(e.getMessage());
        }
        return output.toString();
    }
}
```

å¦‚æœæ˜¯ Wâ indows æ“ä½œâ€Œç³»ç»Ÿï¼Œè¦ä½¿ç”¨ä¸‹é¢è¿™æ®µä»£ç ï¼Œå¦åˆ™å‘½ä»¤æ‰§â€è¡Œä¼šæŠ¥é”™ï¼š

```
public class TerminalOperationTool {

    @Tool(description = "Execute a command in the terminal")
    public String executeTerminalCommand(@ToolParam(description = "Command to execute in the terminal") String command) {
        StringBuilder output = new StringBuilder();
        try {
            ProcessBuilder builder = new ProcessBuilder("cmd.exe", "/c", command);

            Process process = builder.start();
            try (BufferedReader reader = new BufferedReader(new InputStreamReader(process.getInputStream()))) {
                String line;
                while ((line = reader.readLine()) != null) {
                    output.append(line).append("\n");
                }
            }
            int exitCode = process.waitFor();
            if (exitCode != 0) {
                output.append("Command execution failed with exit code: ").append(exitCode);
            }
        } catch (IOException | InterruptedException e) {
            output.append("Error executing command: ").append(e.getMessage());
        }
        return output.toString();
    }
}
```

2ï¼‰ç¼–å†™å•å…ƒæµ‹è¯•ä»£ç ï¼š

```
@SpringBootTest
public class TerminalOperationToolTest {

    @Test
    public void testExecuteTerminalCommand() {
        TerminalOperationTool tool = new TerminalOperationTool();
        String command = "ls -l";
        String result = tool.executeTerminalCommand(command);
        assertNotNull(result);
    }
}
```

è¿è¡Œæ•ˆæœå¦‚å›¾ï¼ŒæˆåŠŸæ‰§è¡Œäº† `ls` æ‰“å°æ–‡ä»¶åˆ—è¡¨å‘½ä»¤å¹¶è·å–åˆ°äº†è¾“å‡ºç»“æœï¼š

### èµ„æºä¸‹è½½

èµ„æºä¸‹è½½å·¥å…·çš„ä½œç”¨æ˜¯é€šè¿‡é“¾æ¥ä¸‹è½½æ–‡ä»¶åˆ°æœ¬åœ°ã€‚

1ï¼‰ä½¿ç”¨ Hutool çš„ `HttpUtil.downloadFile` æ–¹æ³•å®ç°èµ„æºä¸‹è½½ã€‚èµ„æºä¸‹è½½å·¥å…·ç±»çš„ä»£ç å¦‚ä¸‹ï¼š

```
public class ResourceDownloadTool {

    @Tool(description = "Download a resource from a given URL")
    public String downloadResource(@ToolParam(description = "URL of the resource to download") String url, @ToolParam(description = "Name of the file to save the downloaded resource") String fileName) {
        String fileDir = FileConstant.FILE_SAVE_DIR + "/download";
        String filePath = fileDir + "/" + fileName;
        try {
            
            FileUtil.mkdir(fileDir);
            
            HttpUtil.downloadFile(url, new File(filePath));
            return "Resource downloaded successfully to: " + filePath;
        } catch (Exception e) {
            return "Error downloading resource: " + e.getMessage();
        }
    }
}
```

2ï¼‰ç¼–å†™å•å…ƒæµ‹è¯•ä»£ç ï¼š

```
@SpringBootTest
public class ResourceDownloadToolTest {

    @Test
    public void testDownloadResource() {
        ResourceDownloadTool tool = new ResourceDownloadTool();
        String url = "https://www.codefather.cn/logo.png";
        String fileName = "logo.png";
        String result = tool.downloadResource(url, fileName);
        assertNotNull(result);
    }
}
```

æ‰§è¡Œæµ‹è¯•ï¼Œå¯ä»¥åœ¨æŒ‡å®šç›®å½•ä¸‹çœ‹åˆ°ä¸‹è½½çš„å›¾ç‰‡ï¼š

### PDF ç”Ÿæˆ

PDF ç”Ÿâ æˆå·¥å…·çš„ä½œç”¨æ˜¯æ ¹æ®â€Œæ–‡ä»¶åå’Œå†…å®¹ç”Ÿæˆ PDF æ–‡æ¡£å¹¶ä¿å­˜â€ã€‚

å¯ä»¥ä½¿ç”¨ [itext åº“](https://github.com/itext/itext-java) å®ç° PDF ç”Ÿæˆã€‚éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œitext å¯¹ä¸­æ–‡å­—ä½“çš„æ”¯æŒéœ€è¦é¢å¤–é…ç½®ï¼Œä¸åŒæ“ä½œç³»ç»Ÿæä¾›çš„å­—ä½“ä¹Ÿä¸åŒï¼Œå¦‚æœçœŸè¦åšç”Ÿäº§çº§åº”ç”¨ï¼Œå»ºè®®è‡ªè¡Œä¸‹è½½æ‰€éœ€å­—ä½“ã€‚

ä¸è¿‡å¯¹äºå­¦â ä¹ æ¥è¯´ï¼Œä¸å»ºè®®åœ¨è¿™é‡Œâ€Œæµªè´¹å¤ªå¤šæ—¶é—´ï¼Œå¯ä»¥ä½¿ç”¨å†…ç½®ä¸­æ–‡å­—ä½“ï¼ˆä¸å¼•â€å…¥ font-asiâ€Œan å­—ä½“ä¾èµ–ä¹Ÿå¯ä»¥ä½¿ç”¨ï¼‰ï¼š

```
PdfFont font = PdfFontFactory.createFont("STSongStd-Light", "UniGB-UCS2-H");
document.setFont(font);
```

1ï¼‰ç»™é¡¹ç›®æ·»åŠ ä¾èµ–ï¼š

```
<dependency>
    <groupId>com.itextpdf</groupId>
    <artifactId>itext-core</artifactId>
    <version>9.1.0</version>
    <type>pom</type>
</dependency>

<dependency>
    <groupId>com.itextpdf</groupId>
    <artifactId>font-asian</artifactId>
    <version>9.1.0</version>
    <scope>test</scope>
</dependency>
```

2ï¼‰ç¼–å†™å·¥å…·ç±»å®ç°ä»£ç ï¼š

```
public class PDFGenerationTool {

    @Tool(description = "Generate a PDF file with given content")
    public String generatePDF(
            @ToolParam(description = "Name of the file to save the generated PDF") String fileName,
            @ToolParam(description = "Content to be included in the PDF") String content) {
        String fileDir = FileConstant.FILE_SAVE_DIR + "/pdf";
        String filePath = fileDir + "/" + fileName;
        try {
            
            FileUtil.mkdir(fileDir);
            
            try (PdfWriter writer = new PdfWriter(filePath);
                 PdfDocument pdf = new PdfDocument(writer);
                 Document document = new Document(pdf)) {
                




                
                PdfFont font = PdfFontFactory.createFont("STSongStd-Light", "UniGB-UCS2-H");
                document.setFont(font);
                
                Paragraph paragraph = new Paragraph(content);
                
                document.add(paragraph);
            }
            return "PDF generated successfully to: " + filePath;
        } catch (IOException e) {
            return "Error generating PDF: " + e.getMessage();
        }
    }
}
```

ä¸Šè¿°ä»£ç ä¸­ï¼Œä¸ºäº†å®ç°â æ–¹ä¾¿ï¼Œæˆ‘ä»¬æ˜¯ç›´æ¥ä¿å­˜ PDF åˆ°æœ¬åœ°æ–‡ä»¶ç³»â€Œç»Ÿã€‚æ­¤å¤–ï¼Œä½ è¿˜å¯ä»¥å°†ç”Ÿæˆçš„æ–‡ä»¶ä¸Šä¼ åˆ°å¯¹è±¡å­˜å‚¨æœåŠ¡ï¼Œç„¶åè¿”å›å¯è®¿é—®çš„ URâ€L ç»™ AI å»è¾“å‡ºï¼›æˆ–è€…å°†æœ¬åœ°æ–‡ä»¶ä¸´â€Œæ—¶è¿”å›ç»™å‰ç«¯ï¼Œè®©ç”¨æˆ·ç›´æ¥è®¿é—®ã€‚

3ï¼‰ç¼–å†™å•å…ƒæµ‹è¯•ä»£ç ï¼š

```
@SpringBootTest
public class PDFGenerationToolTest {

    @Test
    public void testGeneratePDF() {
        PDFGenerationTool tool = new PDFGenerationTool();
        String fileName = "ç¼–ç¨‹å¯¼èˆªåŸåˆ›é¡¹ç›®.pdf";
        String content = "ç¼–ç¨‹å¯¼èˆªåŸåˆ›é¡¹ç›® https://www.codefather.cn";
        String result = tool.generatePDF(fileName, content);
        assertNotNull(result);
    }
}
```

### é›†ä¸­æ³¨å†Œ

å¼€å‘å¥½äº†è¿™ä¹ˆå¤šå·¥å…·ç±»åï¼Œç»“åˆæˆ‘ä»¬è‡ªå·±çš„éœ€æ±‚ï¼Œå¯ä»¥ç»™ AI ä¸€æ¬¡æ€§æä¾›æ‰€æœ‰å·¥å…·ï¼Œè®©å®ƒè‡ªå·±å†³å®šä½•æ—¶è°ƒç”¨ã€‚æ‰€ä»¥æˆ‘ä»¬å¯ä»¥åˆ›å»º **å·¥å…·æ³¨å†Œç±»**ï¼Œæ–¹ä¾¿ç»Ÿä¸€ç®¡ç†å’Œç»‘å®šæ‰€æœ‰å·¥å…·ã€‚

ä»£ç å¦‚ä¸‹ï¼šâ â€‚â€‚â€‚â€‚â€‚â€‚â€‚â€‚â€‚â€Œâ€‚â€‚â€‚â€‚â€‚â€‚â€‚â€‰â€‚â€‰â€‚â€‚â€‚â€‚â€‚â€‚â€‰â€‚â€â€‰â€‰â€‚â€‰â€‰

```
@Configuration
public class ToolRegistration {

    @Value("${search-api.api-key}")
    private String searchApiKey;

    @Bean
    public ToolCallback[] allTools() {
        FileOperationTool fileOperationTool = new FileOperationTool();
        WebSearchTool webSearchTool = new WebSearchTool(searchApiKey);
        WebScrapingTool webScrapingTool = new WebScrapingTool();
        ResourceDownloadTool resourceDownloadTool = new ResourceDownloadTool();
        TerminalOperationTool terminalOperationTool = new TerminalOperationTool();
        PDFGenerationTool pdfGenerationTool = new PDFGenerationTool();
        return ToolCallbacks.from(
            fileOperationTool,
            webSearchTool,
            webScrapingTool,
            resourceDownloadTool,
            terminalOperationTool,
            pdfGenerationTool
        );
    }
}
```

ğŸ’¡ å¯åˆ«å°ç§è¿™æ®µä»£ç ï¼Œå…¶å®å®ƒæš—å«äº†å¥½å‡ ç§è®¾è®¡æ¨¡å¼ï¼š

1. å·¥å‚æ¨¡å¼ï¼šallTools() æ–¹æ³•ä½œä¸ºä¸€ä¸ªå·¥å‚æ–¹æ³•ï¼Œè´Ÿè´£åˆ›å»ºå’Œé…ç½®å¤šä¸ªå·¥å…·å®ä¾‹ï¼Œç„¶åå°†å®ƒä»¬åŒ…è£…æˆç»Ÿä¸€çš„æ•°ç»„è¿”å›ã€‚è¿™ç¬¦åˆå·¥å‚æ¨¡å¼çš„æ ¸å¿ƒæ€æƒ³ - é›†ä¸­åˆ›å»ºå¯¹è±¡å¹¶éšè—åˆ›å»ºç»†èŠ‚ã€‚
2. ä¾èµ–æ³¨å…¥æ¨¡å¼ï¼šé€šè¿‡ `@Value` æ³¨è§£æ³¨å…¥é…ç½®å€¼ï¼Œä»¥åŠå°†åˆ›å»ºå¥½çš„å·¥å…·é€šè¿‡ Spring å®¹å™¨æ³¨å…¥åˆ°éœ€è¦å®ƒä»¬çš„ç»„ä»¶ä¸­ã€‚
3. æ³¨å†Œæ¨¡å¼ï¼šè¯¥ç±»ä½œä¸ºä¸€ä¸ªä¸­å¤®æ³¨å†Œç‚¹ï¼Œé›†ä¸­ç®¡ç†å’Œæ³¨å†Œæ‰€æœ‰å¯ç”¨çš„å·¥å…·ï¼Œä½¿å®ƒä»¬èƒ½å¤Ÿè¢«ç³»ç»Ÿå…¶ä»–éƒ¨åˆ†ç»Ÿä¸€è®¿é—®ã€‚
4. é€‚é…å™¨æ¨¡å¼çš„åº”ç”¨ï¼šToolCallbacks.from æ–¹æ³•å¯ä»¥çœ‹ä½œæ˜¯ä¸€ç§é€‚é…å™¨ï¼Œå®ƒå°†å„ç§ä¸åŒçš„å·¥å…·ç±»è½¬æ¢ä¸ºç»Ÿä¸€çš„ ToolCallback æ•°ç»„ï¼Œä½¿ç³»ç»Ÿèƒ½å¤Ÿä»¥ä¸€è‡´çš„æ–¹å¼å¤„ç†å®ƒä»¬ã€‚

æœ‰äº†è¿™ä¸ªæ³¨â å†Œç±»ï¼Œå¦‚æœéœ€è¦æ·»åŠ â€Œæˆ–ç§»é™¤å·¥å…·ï¼Œåªéœ€ä¿®æ”¹è¿™ä¸€ä¸ªç±»å³å¯ï¼Œæ›´åˆ©â€äºç»´æŠ¤ã€‚

### ä½¿ç”¨å·¥å…·

åœ¨ Lovâ eApp ç±»ä¸­æ·»åŠ â€Œå·¥å…·è°ƒç”¨çš„ä»£ç ï¼Œé€šè¿‡ tools æ–¹â€æ³•ç»‘å®šæ‰€æœ‰å·²æ³¨å†Œçš„â€Œå·¥å…·ï¼š

```
@Resource
private ToolCallback[] allTools;

public String doChatWithTools(String message, String chatId) {
    ChatResponse response = chatClient
            .prompt()
            .user(message)
            .advisors(spec -> spec.param(CHAT_MEMORY_CONVERSATION_ID_KEY, chatId)
                    .param(CHAT_MEMORY_RETRIEVE_SIZE_KEY, 10))
            
            .advisors(new MyLoggerAdvisor())
            .tools(allTools)
            .call()
            .chatResponse();
    String content = response.getResult().getOutput().getText();
    log.info("content: {}", content);
    return content;
}
```

### æµ‹è¯•ä½¿ç”¨å·¥å…·

æœ€åï¼Œç¼–å†™â å•å…ƒæµ‹è¯•ä»£ç ï¼Œé€šè¿‡â€Œç‰¹å®šçš„æç¤ºè¯ç²¾å‡†è§¦å‘å·¥å…·è°ƒç”¨ï¼ˆä¸è¿‡ç”±â€äº AI çš„éšæœºæ€§â€Œï¼Œä»ç„¶æœ‰å°æ¦‚ç‡å¤±è´¥ï¼‰ï¼š

```
@Test
void doChatWithTools() {
    
    testMessage("å‘¨æœ«æƒ³å¸¦å¥³æœ‹å‹å»ä¸Šæµ·çº¦ä¼šï¼Œæ¨èå‡ ä¸ªé€‚åˆæƒ…ä¾£çš„å°ä¼—æ‰“å¡åœ°ï¼Ÿ");

    
    testMessage("æœ€è¿‘å’Œå¯¹è±¡åµæ¶äº†ï¼Œçœ‹çœ‹ç¼–ç¨‹å¯¼èˆªç½‘ç«™ï¼ˆcodefather.cnï¼‰çš„å…¶ä»–æƒ…ä¾£æ˜¯æ€ä¹ˆè§£å†³çŸ›ç›¾çš„ï¼Ÿ");

    
    testMessage("ç›´æ¥ä¸‹è½½ä¸€å¼ é€‚åˆåšæ‰‹æœºå£çº¸çš„æ˜Ÿç©ºæƒ…ä¾£å›¾ç‰‡ä¸ºæ–‡ä»¶");

    
    testMessage("æ‰§è¡Œ Python3 è„šæœ¬æ¥ç”Ÿæˆæ•°æ®åˆ†ææŠ¥å‘Š");

    
    testMessage("ä¿å­˜æˆ‘çš„æ‹çˆ±æ¡£æ¡ˆä¸ºæ–‡ä»¶");

    
    testMessage("ç”Ÿæˆä¸€ä»½â€˜ä¸ƒå¤•çº¦ä¼šè®¡åˆ’â€™PDFï¼ŒåŒ…å«é¤å…é¢„è®¢ã€æ´»åŠ¨æµç¨‹å’Œç¤¼ç‰©æ¸…å•");
}

private void testMessage(String message) {
    String chatId = UUID.randomUUID().toString();
    String answer = loveApp.doChatWithTools(message, chatId);
    Assertions.assertNotNull(answer);
}
```

é€šè¿‡ç»™å·¥å…·â ç±»çš„ä»£ç æ‰“æ–­ç‚¹ï¼Œå¯â€Œä»¥åœ¨ Debug æ¨¡å¼ä¸‹è§‚å¯Ÿå·¥å…·çš„è°ƒâ€ç”¨è¿‡ç¨‹å’Œç»“æœã€‚ä»¥ä¸‹â€Œæ˜¯å„å·¥å…·çš„æµ‹è¯•ç»“æœï¼š

1ï¼‰ æµ‹è¯•è”ç½‘æœç´¢

2ï¼‰æµ‹è¯•ç½‘é¡µæŠ“å–

3ï¼‰æµ‹è¯•èµ„æºä¸‹è½½ã€‚å¯èƒ½ä¼šå…ˆè°ƒç”¨è”ç½‘æœç´¢ã€å†è°ƒç”¨èµ„æºä¸‹è½½ï¼š

4ï¼‰æµ‹è¯•ç»ˆç«¯æ“ä½œ

è™½ç„¶æµ‹è¯•ç»“æœæâ ç¤º â€œè„šæœ¬ä¸å­˜åœ¨â€ï¼Œä½†è¿™è¯â€Œæ˜äº† AI å·²å…·å¤‡æ“ä½œç»ˆç«¯çš„èƒ½åŠ›ã€‚æƒ³è¦æˆåŠŸæ‰§è¡Œè„šæœ¬ï¼Œâ€éœ€è¦å…ˆé€šè¿‡æ–‡ä»¶æ“ä½œå·¥å…·åˆ›å»ºâ€Œè„šæœ¬æ–‡ä»¶ï¼Œç„¶åå†æ‰§è¡Œã€‚

5ï¼‰æµ‹è¯• PDF ç”Ÿæˆï¼ŒæˆåŠŸä¿å­˜äº† PDF æ–‡ä»¶ï¼š

6ï¼‰æµ‹è¯•æ–‡ä»¶æ“ä½œï¼ŒæˆåŠŸä¿å­˜äº†æ–‡ä»¶ï¼š

## äº”ã€å·¥å…·è¿›é˜¶çŸ¥è¯†

å…¶å®å…³äºå·¥å…·è°ƒç”¨ï¼Œâ æŒæ¡æ ¸å¿ƒæ¦‚å¿µå’Œå·¥å…·å¼€å‘æ–¹æ³•å°±è¶³å¤Ÿäº†â€Œï¼Œä½†æ˜¯ä¸ºäº†å¸®å¤§å®¶æ›´å¥½åœ°ç†è§£ Spring AI çš„å·¥å…·è°ƒç”¨æœºåˆ¶ï¼ˆæ›´å¥½â€åœ°åŠæ‰“é¢è¯•å®˜ï¼‰ï¼Œè¿˜æ˜¯ç»™å¤§å®¶è®²ä¸€äº›è¿›â€Œé˜¶çŸ¥è¯†ï¼Œæ— éœ€è®°å¿†ï¼Œäº†è§£å³å¯ã€‚

### å·¥å…·åº•å±‚æ•°æ®ç»“æ„

è®©æˆ‘ä»¬æ€è€ƒâ ä¸€ä¸ªé—®é¢˜ï¼šAI æ€â€Œä¹ˆçŸ¥é“è¦å¦‚ä½•è°ƒç”¨å·¥å…·ï¼Ÿè¾“å‡ºç»“æœä¸­åº”è¯¥â€åŒ…å«å“ªäº›å‚æ•°æ¥è°ƒç”¨â€Œå·¥å…·å‘¢ï¼Ÿ

Spring AI å·¥å…·è°ƒç”¨çš„æ ¸å¿ƒåœ¨äº `ToolCallback` æ¥å£ï¼Œå®ƒæ˜¯æ‰€æœ‰å·¥å…·å®ç°çš„åŸºç¡€ã€‚å…ˆåˆ†æä¸‹è¯¥æ¥å£çš„æºç ï¼š

```
public interface ToolCallback {

    
    ToolDefinition getToolDefinition();

    
    ToolMetadata getToolMetadata();

    
    String call(String toolInput);

    
    String call(String toolInput, ToolContext tooContext);
}
```

è¿™ä¸ªæ¥å£ä¸­ï¼š

- `getToolDefinition()` æä¾›äº†å·¥å…·çš„åŸºæœ¬å®šä¹‰ï¼ŒåŒ…æ‹¬åç§°ã€æè¿°å’Œè°ƒç”¨å‚æ•°ï¼Œè¿™äº›ä¿¡æ¯ä¼šä¼ é€’ç»™ AI æ¨¡å‹ï¼Œå¸®åŠ©æ¨¡å‹äº†è§£ä»€ä¹ˆæ—¶å€™åº”è¯¥è°ƒç”¨è¿™ä¸ªå·¥å…·ã€ä»¥åŠå¦‚ä½•æ„é€ å‚æ•°
- `getToolMetadata()` æä¾›äº†å¤„ç†å·¥å…·çš„é™„åŠ ä¿¡æ¯ï¼Œæ¯”å¦‚æ˜¯å¦ç›´æ¥è¿”å›ç»“æœç­‰æ§åˆ¶é€‰é¡¹
- ä¸¤ä¸ª `call()` æ–¹æ³•æ˜¯å·¥å…·çš„æ‰§è¡Œå…¥å£ï¼Œåˆ†åˆ«æ”¯æŒæœ‰ä¸Šä¸‹æ–‡å’Œæ— ä¸Šä¸‹æ–‡çš„è°ƒç”¨åœºæ™¯

å·¥å…·å®šä¹‰ç±»â  ToolDefiâ€Œnition çš„ç»“æ„å¦‚ä¸‹å›¾ï¼ŒåŒ…å«åç§°â€ã€æè¿°å’Œè°ƒç”¨å·¥å…·çš„â€Œå‚æ•°ï¼š